{% extends 'crm/base.html' %}
{% load static %}
{% block title %}
  Team Members
{% endblock title %}
{% block extra_css %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"
          xmlns="http://www.w3.org/1999/html"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
{% endblock %}

{% block body %}
  <div class="uk-container" id="Teams">

    <section class="uk-width-1-1@m uk-margin-remove">
      <div class="uk-width-1-1 uk-margin-remove" data-uk-grid>
        <div class="srm-page-heading uk-width-1-2@m uk-padding-small">
          {{ team.creator.first_name }}'s team members
        </div>
      </div>
      <div class="uk-width-1-1 uk-margin-remove-left uk-padding-remove" data-uk-grid>
        <div class="uk-width-1-2@m uk-padding-remove-left">
          <div class="srm-page-heading uk-text-muted">
            {{ members.count }} members total
          </div>
        </div>

        <div class="srm-contacts-button-group uk-flex uk-flex-right@m uk-width-1-2@m uk-padding-remove">
          <button class="srm-button srm-button-transparent srm-float-right@m fixed-padding"><img
            src="{% static 'crm/images/group.png' %}"
            srcset="/..crm/static/images/group@2x.png 2x, /..crm/static/images/group@3x.png 3x"
            class="uk-margin-small-right"><a href="{% url 'srm:teams:teams' %}">My teams</a></button>
        </div>
      </div>
    </section>
    <div class="grid-left-margin uk-margin-remove-left" data-uk-grid>
      <div class="uk-width-2-3@m srm-contacts-card-list uk-margin-small-top" data-uk-grid>
        {% for member in members %}
          <div class="uk-width-1-2@m">
            <div class="srm-card uk-padding-remove srm-contact-card">
              <table class="srm-contact-card-table">
                <tbody>
                <tr>
                  <td>
                    <div data-uk-grid>
                      <div class="img-thumbnail uk-margin-small-top">
                        {% if member.user.profile_image %}
                          <img src="{{ member.user.profile_image.url }} " alt="" uk-img class="img-thumbnail-img">
                        {% else %}
                          <img src="{% static 'crm/images/no-image.png' %} " alt="" uk-img class="img-thumbnail-img">
                        {% endif %}
                        <img class="uk-border-circle Oval-xsmall">
                      </div>
                      <div class="uk-margin-small-top small-padding-left">
                        <span class="srm-contact-card-label">{{ team.name }}</span><br><span
                        class="srm-contact-card-value uk-margin-small-right">{{ member.nick_name }}</span><span
                        class="fas fa-comment srm-contact-card-value icon-weight"></span>
                      </div>
                    </div>

                  </td>
                </tr>
                <tr>
                  <td class="word">
                    <div class="uk-width-1-1 uk-margin-remove" data-uk-grid>
                      <div
                        class="srm-contact-card-label uk-width-auto uk-padding-remove-left">{{ member.personal_phone }}</div>
                      <div class="srm-contact-card-label uk-width-expand">{{ member.email }}</div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td class="">
                    <div class="uk-width-1-1 uk-margin-remove" data-uk-grid>
                      <div class="srm-contact-card-value-small uk-width-1-2@m uk-padding-remove-left "><img
                        src="{% static 'crm/images/contacts-icon.png' %}"
                        srcset="/../static/images/contacts-icon@2x.png 2x, /../static/images/contacts-icon@3x.png 3x"
                        class="uk-margin-small-right">{{ team.name }}</div>
                      <div
                        class="srm-contact-card-value-small uk-width-1-2@m uk-padding-remove-left uk-flex uk-flex-right">
                        <div><img src="{% static 'crm/images/shape-copy-13.png' %}" alt=""
                                  class="uk-margin-small-right"> Added: {{ member.date_created|date:"n/Y" }}</div>
                      </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a href="{% url 'srm:teams:delete-team-mbr' member.id %}">
                      <button class="srm-button srm-button-primary-outline crm-button-large">Remove</button>
                    </a>
                  </td>
                </tr>

                </tbody>
              </table>
            </div>
          </div>
        {% endfor %}
      </div>
      <div class="uk-width-1-3@m uk-margin-small-top">
        <div>
          <div class="srm-card uk-padding-remove srm-contact-card">
            <table class="srm-contact-card-table">
              <tbody>
              <form action="{% url 'srm:teams:invite_member' team.id %}" role="form" method="POST">
                {% include "crm/teams/forms/invite_member.html"  with form=form_invite_member %}
              </form>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  {% block Modal %}
    <div id="TeamModal" class="uk-flex-top" uk-modal>
      <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical uk-width-1-3@m uk-border-rounded">
        <h4 class="uk-modal-title uk-text-center modal-header">Create team</h4>
        <form class="uk-grid-small" uk-grid>
          <div class="uk-margin-small-top uk-width-1-1">
            <label class="uk-form-label Label" for="form-stacked-text">Team name</label>
            <div class="uk-form-controls input-box">
              <input class="srm-input" id="form-stacked-text" type="text" placeholder="New team">
            </div>
          </div>
          <div class="uk-margin-medium-top uk-width-1-1">
            <label class="uk-form-label Label" for="form-stacked-text">Description</label>
            <div class="uk-form-controls input-box">
              <input class="srm-input" id="form-stacked-text" type="text" placeholder="About the team">
            </div>
          </div>
          <div class="uk-margin-small-top uk-width-1-1">
            <label class="uk-form-label Label" for="form-stacked-text"></label>
            <div class="uk-form-controls input-box">
              <select class="srm-input crm-select2" id="">
                <option>You have no numbers to add</option>
              </select>
            </div>
          </div>
          <div class="uk-margin-medium-top uk-width-1-1 uk-flex uk-flex-center uk-padding-small">
            <!--<button class="srm-button srm-button-primary-outline srm-button-large uk-margin-left">Test</button>-->
            <button class="srm-button srm-button-primary-outline srm-button-large">Save</button>
          </div>
        </form>
      </div>
    </div>
  {% endblock Modal %}

{% endblock body %}

{% block extra_js %}

  <script>
    $(document).ready(function () {
      $('.invite-select').select2({
        placeholder: "Select a user"
      });
    });
  </script>

{% endblock extra_js %}
