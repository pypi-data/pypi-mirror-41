{% extends 'crm/base.html' %}
{% load static %}
{% block title %}
  {{ campaign_type | title }} Campaigns
{% endblock title %}
{% block extra_css %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
{% endblock extra_css %}
{% block body_no_container %}
  <div id="campaigns" v-cloak>
    {% include 'crm/marketing/campaigns/includes/campaign-types/filter-section.html' %}

    <div class="uk-container uk-margin-medium-top" id="">
      <section data-uk-grid class="uk-child-width-1-2@m">
        <div>
          <div class="srm-page-heading">
            My {{ campaign_type | title }} campaigns
          </div>
        </div>

        <div class="srm-contacts-button-group uk-flex uk-flex-right@m uk-flex-center">
          <button class="srm-button srm-button-transparent srm-float-right@m fixed-padding">
            <img src="{% static 'crm/images/call-answer.png' %}" alt="" class="uk-margin-small-right">
            <a href="{% url 'srm:marketing:campaigns:campaign-log-types' 'email' 'outgoing' %}">
              Outgoing Emails
            </a>
          </button>
          <button class="srm-button srm-button-transparent srm-float-right@m fixed-padding">
            <img src="{% static 'crm/images/group.png' %}" alt="" class="uk-margin-small-right">
            <a href="{% url 'srm:marketing:campaigns:campaign-log-types' 'email' 'incoming' %}">
              Received Emails
            </a>
          </button>
        </div>
      </section>
      <div class="uk-child-width-1-3@m uk-child-width-1-2@s srm-contacts-card-list uk-margin-small-top" data-uk-grid>
        <div v-for="(campaign, key) in campaigns.results" :key="key">
          {% include 'crm/marketing/campaigns/includes/campaign-types/email-campaign-card.html' %}
        </div>
      </div>

      <div class="srm-table-footer uk-width-auto@m uk-flex uk-flex-right">
        <button @click.prevent="previous" :disabled="!campaigns.previous" class="srm-button-transparent"><span class="uk-margin-small-right" uk-pagination-previous></span> Previous</button>
        <span>[[ campaigns.count > 0 ? (page * 100) + 1 : 0 ]] - [[ campaigns.results.length + (page * 100) ]] of [[ campaigns.count ]]</span>
        <button :disabled="!campaigns.next" @click.prevent="next" class="srm-button-transparent">Next <span class="uk-margin-small-left" uk-pagination-next></span></button>
      </div>
    </div>
  </div>
{% endblock body_no_container %}
{% block extra_js %}
  <script>
    const url = '/api/marketing/campaigns/{{ campaign_type }}/'
  </script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="{% static 'crm/js/marketing/contact-notes.js' %}"></script>
  <script src="{% static 'crm/js/marketing/campaigns/campaign-types.js' %}"></script>
{% endblock extra_js %}
