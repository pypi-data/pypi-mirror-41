{% load static %}
<div id="SelectMessageModal" class="uk-flex-top" data-uk-modal="stack:true">
  <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical uk-width-1-3@m">
    <h4 class="uk-modal-title uk-text-center modal-header">Set Default Personalized Messages</h4>
    <a class="uk-modal-close uk-position-absolute uk-position-top-right uk-margin uk-margin-right uk-text-danger" type="button" data-uk-icon="close"></a>
    <div class="uk-padding-medium uk-padding-remove-horizontal">
      <input type="text" name="search" v-model="message_search" class="srm-input" @keyup.enter="searchMessage" placeholder="Search Personal Message...">
    </div>
    <ul uk-tab class="srm-tab">
      <li class="uk-active"><a href="#" @click.prevent="toggleSelectDefaultTabs('voice')"><i data-uk-icon="receiver"></i> Voice</a></li>
      <li><a href="#" @click.prevent="toggleSelectDefaultTabs('sms')"><i data-uk-icon="comments"></i> SMS</a></li>
      <li><a href="#" @click.prevent="toggleSelectDefaultTabs('add')"><i data-uk-icon="plus"></i> Add Message</a></li>
    </ul>
    <div v-if="isSearching" class="uk-padding-small uk-padding-remove-horizontal">
      Loading...
    </div>
    <div v-if="active_tab === 'voice'">
      <ul class="srm-list-select" v-if="personal_voice_messages.length > 0">
        <li v-for="(msg, index) in personal_voice_messages" :key="index">
          <input type="radio" name="msg-voice" v-model="default_voice" @change="setAsDefault('voice')" :value="msg" class="uk-hidden" :id="'msg-voice-' + index">
          <label :for="'msg-voice-' + index">
            <div class="uk-flex uk-flex-center uk-flex-between uk-padding">
              <div>
                <div class="uk-h5">
                  [[ msg.name ]]
                  <span class="uk-badge">
                  [[ msg.type ]]
                </span>
                </div>
                <small v-if="msg.text" class="uk-text-small uk-display-block">
                  [[ msg.text ]]
                </small>
              </div>
              <div v-if="msg.audio">
                <a href="" uk-icon="play-circle" @click.prevent="playAudio(index)"></a>
              </div>
            </div>
          </label>
        </li>
      </ul>
      <div v-else class="uk-alert uk-alert-warning">
        You have no personalized messages. click <a target="_blank" @click.prevent="toggleSelectDefaultTabs('add')" href="{% url 'srm:marketing:autodialer:personalized-messages' %}">here</a> to create.
      </div>
    </div>
    <div v-if="active_tab === 'sms'">
      <ul class="srm-list-select" v-if="personal_sms_messages.length > 0">
        <li v-for="(msg, index) in personal_sms_messages" :key="index">
          <input type="radio" name="msg-sms" v-model="default_sms" :value="msg" @change="setAsDefault('sms')" class="uk-hidden" :id="'msg-sms-' + index">
          <label :for="'msg-sms-' + index">
            <div class="uk-flex uk-flex-center uk-flex-between uk-padding">
              <div>
                <div class="uk-h5">
                  [[ msg.name ]]
                  <span class="uk-badge">
                  [[ msg.type ]]
                </span>
                </div>
                <small v-if="msg.text" class="uk-text-small uk-display-block">
                  [[ msg.text ]]
                </small>
              </div>
            </div>
          </label>
        </li>
      </ul>
      <div v-else class="uk-alert uk-alert-warning">
        You have no personalized messages. click <a target="_blank" @click.prevent="toggleSelectDefaultTabs('add')" href="{% url 'srm:marketing:autodialer:personalized-messages' %}">here</a> to create.
      </div>
    </div>
    <div v-if="active_tab === 'add'">
      {% include 'crm/marketing/autodialer/includes/create-personalized-form.html' %}
    </div>
    <div class="uk-flex uk-flex-middle">
      <input type="submit" class="srm-button srm-button-primary-outline srm-button-large uk-margin-auto" @click.prevent="closeSelectDefaults" value="Close">
    </div>
  </div>
</div>
