{% extends 'ccc/beacons/base.html' %}
{% load staticfiles %}
{% block title %} Beacons Devices {% endblock title %}
{% block content-body %}
    <div ng-controller="DeviceListCtrl">
        <div class="row page-header-title">
            {% block page-title %}
                <div class="col-md-12">
                    <!-- BEGIN PAGE TITLE & BREADCRUMB-->
                     <h3 class="page-title">
                        Beacons devices
                    </h3>
                </div>
            {% endblock page-title %}
        </div>
            <!-- END PAGE HEADER-->
        {% block page-body %}
        <div class="row">
            <div class="col-lg-2 col-md-2 col-sm-6 col-xs-6">
                <a href="{% url 'beacons_location' %}" class="btn btn-primary beacon-location-btn">Beacon Location</a>
            </div>
            <div class="col-lg-8 col-md-8 col-sm-6 col-xs-6">

            </div>
            <div class="col-lg-2 col-md-2 col-sm-6 col-xs-6">
                <button type="button" class="btn btn-primary add-message-btn" ng-click="getDeviceForm('{% url 'beacons_device_form' %}', '{% url 'beacons-list' %}')">
                    <i class="fa fa-plus-circle" aria-hidden="true"></i> Add Beacon
                </button>
            </div>
        </div>
        <div class="clearfix"></div>
        <!-- BEGIN DETAILS -->
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Device name</th>
                            <th>UID</th>
                            <th>URL</th>
                            <th>Message</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody infinite-scroll='device_list.nextPage()' infinite-scroll-disabled='device_list.busy' infinite-scroll-distance='5'>
                        <tr ng-repeat="device in device_list.items">
                            <td ng-cloak>{$ $index + 1 $}</td>
                            <td ng-cloak>{$ device.name $}</td>
                            <td ng-cloak>{$ device.uid $}</td>
                            <td ng-cloak>{$ device.url $}</td>
                            <td ng-cloak>{$ device.message $}</td>
                            <td>
                                <button type="button" class="btn btn-success btn-sm" ng-click="getDeviceForm('{% url 'beacons_device_form' %}', id=device.id, is_edit=true)">
                                    <i class="fa fa-pencil-square" aria-hidden="true"></i>Edit
                                </button>
                                <button type="button" class="btn btn-danger btn-sm" ng-click="deleteConfirmedForm('{% url 'beacons_delete' %}', delete_url='/beacons/beacons/'+device.id+'/')"><i class="fa fa-trash" aria-hidden="true"></i>Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!-- END DETAILS -->
        <div class="clearfix"></div>
    {% endblock page-body %}
    </div>
{% endblock content-body %}
{% block extrascripts %}
    <script src="{% static 'js/beacons/controllers/devices.js' %}" type="text/javascript"></script>
{% endblock extrascripts %}
