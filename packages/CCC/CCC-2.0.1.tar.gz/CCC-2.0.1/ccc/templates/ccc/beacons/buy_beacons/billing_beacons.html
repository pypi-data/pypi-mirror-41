{% extends 'ccc/beacons/base.html' %}
{% load staticfiles %}
{% block title %} Beacons Billing {% endblock title %}
{% block content-body %}
<div ng-controller="BillingBeaconCtrl" class="buy-beacons-list">
    <div class="row page-header-title">
        {% block page-title %}
        <div class="col-md-12">
            <!-- BEGIN PAGE TITLE & BREADCRUMB-->
            <h3 class="page-title">
                Beacons <snap ng-show="!is_payment">Shipping/Billing Address</snap><snap ng-show="is_payment">Payment Details</snap>
            </h3>
        </div>
        {% endblock page-title %}
    </div>
    <!-- END PAGE HEADER-->
    {% block page-body %}
    <br>
    <div class="clearfix"></div>
    <!-- BEGIN DETAILS -->
    <div class="row">
        <form ng-show="!is_payment" name="billing_address" role="form" class="form-horizontal" method="post" ng-submit="submitBillingData('{{csrf_token}}')">
            <div class="col-sm-6">
                <h3><span class="label label-default">Shipping Address Details</span></h3>
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="required">First name</label>
                        <input type="text" class="form-control" placeholder="First" ng-model="shipping.first_name" required>
                    </div>
                    <div class="col-sm-6">
                        <label class="required">Last name</label>
                        <input type="text" class="form-control" placeholder="Last" ng-model="shipping.last_name" required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-12">
                        <label class="required">Address Line 1</label>
                        <input type="text" class="form-control" ng-model="shipping.address_1" placeholder="Street and number, P.O. box, c/o." required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-12">
                        <label>Address Line 2</label>
                        <input type="text" class="form-control" ng-model="shipping.address_2" placeholder="Apartment, suite, unit, building, floor, etc.">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="required">Zip Code</label>
                        <input type="text" pattern="\d{5}([\-]\d{4})?" maxlength="5" class="form-control" ng-blur="getAddressByZip(true)" ng-model="shipping.zip" placeholder="Zip Code" required>
                    </div>
                    <div class="col-sm-6">
                        <label class="required">City</label>
                        <input type="text" class="form-control" ng-model="shipping.city" placeholder="City" required></div>
                </div>
                <div class="form-group">
                    <div class="col-sm-6"><label class="required">State / Province / Region</label>
                        <input type="text" ng-model="shipping.state" class="form-control" placeholder="State / Province / Region" required>
                    </div>
                    <div class="col-sm-6"><label class="required">Country</label>
                        <input type="text" ng-model="shipping.country" class="form-control" placeholder="Country" disabled required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-12"><label class="required">Phone</label>
                        <input type="text" name="shipping_phone" class="form-control" ng-model="shipping.phone" placeholder="333-333-3333" required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-12">
                        <label>Shipping address same as billing</label>
                        <label class="radio-inline">
                            <input type="radio" value="true" name="is_billing_address" ng-model="is_billing" ng-change='copyAddress(true)'> Yes
                        </label>
                        <label class="radio-inline">
                            <input type="radio" value="false" name="is_billing_address" ng-model="is_billing" ng-change='copyAddress(false)'> No
                        </label>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <h3><span class="label label-default">Billing Address Details</span></h3>
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="required">First name</label>
                        <input type="text" class="form-control" placeholder="First" ng-model="billing.first_name" required>
                    </div>
                    <div class="col-sm-6">
                        <label class="required">Last name</label>
                        <input type="text" class="form-control" placeholder="Last" ng-model="billing.last_name" required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-12">
                        <label class="required">Address Line 1</label>
                        <input type="text" class="form-control" ng-model="billing.address_1" placeholder="Street and number, P.O. box, c/o." required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-12">
                        <label>Address Line 2</label>
                        <input type="text" class="form-control" ng-model="billing.address_2" placeholder="Apartment, suite, unit, building, floor, etc.">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-6">
                        <label class="required">Zip Code</label>
                        <input type="text" pattern="\d{5}([\-]\d{4})?" maxlength="5" class="form-control" ng-blur="getAddressByZip(false)" ng-model="billing.zip" placeholder="Zip Code" required>
                    </div>
                    <div class="col-sm-6">
                        <label class="required">City</label>
                        <input type="text" class="form-control" ng-model="billing.city" placeholder="City" required></div>
                </div>
                <div class="form-group">
                    <div class="col-sm-6"><label class="required">State / Province / Region</label>
                        <input type="text" ng-model="billing.state" class="form-control" placeholder="State / Province / Region" required>
                    </div>
                    <div class="col-sm-6"><label class="required">Country</label>
                        <input type="text" ng-model="billing.country" class="form-control" placeholder="Country" disabled required>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-12">
                        <label class="required">Phone</label>
                        <input type="text" name="billing_phone" class="form-control" ng-model="billing.phone" placeholder="333-333-3333" required>
                    </div>
                </div>
            </div>
            <div class="col-sm-12">
                <div class="col-sm-4"></div>
                <div class="col-sm-4 col-sm-offset-1">
                    <a href="{% url 'ccc:beacons_buy_beacons' %}" class="btn btn-info">Back</a>
                    <button type="submit" class="btn btn-success">Continue</button>
                </div>
                <div class="col-sm-4"></div>

            </div>
        </form>
        <div class="col-sm-12">
            <div class="col-sm-3"></div>
            <div class="col-sm-8">
                <form ng-show="is_payment" name="card_form" role="form" class="form-horizontal" method="post" ng-submit="paymentData('{{csrf_token}}')">
                    <div class="form-group">
                        <div class="col-sm-4">
                            <label ng-cloak>Packages contain total {$ beacon_number $}  Beacon</label>
                        </div>
                        <div class="col-sm-8"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4">
                            <label class="required">Total Amount</label>
                        </div>
                        <div class="col-sm-4"><b ng-cloak>${$ package_price+additional_beacons*per_beacon_price $}</b></div>
                        <div class="col-sm-4"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-4"><b>Additional Beacons</b></div>
                        <div class="col-sm-4">
                            <input type="number" class="form-control" ng-model="additional_beacons" name="additional_beacons" min="0" max="1000">
                        </div>
                        <div class="col-sm-4"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <label class="required">Cardholder Name</label>
                            <input type="text" class="form-control" ng-model="payments.full_name" placeholder="Full Name" required>
                        </div>
                        <div class="col-sm-4"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <label class="required">Card Number</label>
                            <input type="text" name="card_number" class="form-control card-number" ng-model="payments.card_number" ng-change="analyze()" placeholder="Card Number" required>
                        </div>
                        <div class="col-sm-4"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <label class="required">Card CVV</label>
                            <input type="text" name="cvv" class="form-control" ng-model="payments.cvv" placeholder="CVV" required>
                        </div>
                        <div class="col-sm-4"></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-8">
                            <label class="required">Card Expiry MM/YY</label>
                            <input type="text" name="expiry_date" class="form-control" ng-model="payments.expiry_date" placeholder="MM/YY" required>
                        </div>
                        <div class="col-sm-4"></div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-8">
                            <button class="btn btn-info" ng-click="getBack()">Back</button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <button class="btn btn-warning" type="button" ng-click='previewOrder("{% url "ccc:beacons_order_preview" 2 %}")'>Preview Order</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <button class="btn btn-success" type="submit">Pay Now</button>&nbsp;&nbsp;&nbsp;
                            <span id="siteseal">
                                <script async type="text/javascript" src="https://seal.godaddy.com/getSeal?sealID=m7U48hXXOnyIxU8hazzLUqE8gojlN6AWMwkD9onQUkNmVEVx7rRSK8nZZg3f"></script>
                            </span>
                        </div>
                        <div class="col-sm-4"></div>
                    </div>
                </form>
            </div>
            <div class="col-sm-1"></div>
        </div>
    </div>
</div>
<!-- END DETAILS -->
<div class="clearfix"></div>
{% endblock page-body %}
</div>
{% endblock content-body %}
{% block extrascripts %}
<script type="text/javascript" src="{% static 'assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js' %}"></script>
<script type="text/javascript" src="{% static 'assets/plugins/jquery-inputmask/jquery.inputmask.bundle.js' %}"></script>
<script src="{% static 'js/beacons/controllers/purchase.js' %}" type="text/javascript"></script>
<script type="text/javascript">
    $("input[name='billing_phone'], input[name='shipping_phone']").inputmask("mask", {"mask": "(999) 999-9999"});
    $("input[name='expiry_date']").inputmask("99/99",{ "placeholder": "MM/YY" });
    $("input[name='cvv']").inputmask("9999",{ "placeholder": "****" });
</script>
{% endblock extrascripts %}
