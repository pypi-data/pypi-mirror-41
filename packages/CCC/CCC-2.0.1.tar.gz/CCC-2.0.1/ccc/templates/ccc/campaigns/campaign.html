{% extends 'ccc/campaigns/base.html' %}
{% load tz static i18n staticfiles %}
{% block title %}Campaigns {% endblock title %}
{% load static %}

{% block css %}
  <link rel="stylesheet" type="text/css" href="{% static 'assets/plugins/select2/select2.css' %}"/>
  <link rel="stylesheet" type="text/css" href="{% static 'assets/plugins/select2/select2-metronic.css' %}"/>
  <link rel="stylesheet" href="{% static 'assets/plugins/data-tables/DT_bootstrap.css' %}"/>
  <script charset="utf-8" type="text/javascript" src="{% static  'ckeditor/ckeditor.js' %}"></script>
  <!-- END PAGE LEVEL STYLES -->
 {% endblock css %}


{% block content %}
    <div class="row"> <!-- BEGIN PAGE HEADER-->
      <div class="col-md-12">
        <ul class="page-breadcrumb breadcrumb"><!-- BEGIN PAGE TITLE & BREADCRUMB-->

          <li class="btn-group">
            <span class="primary yellow">
              {% if campaign.active %}
              <button class="btn default" id="new-fucp" >
                <i class="fa fa-plus"></i> Add Follow Up Campaign <i class="fa fa-bullhorn"></i>
              </button>
              {% endif %}
            </span>
          </li>

          <li>
            <i class="fa fa-bullhorn"></i>
            <a href="#">{{ campaign.name }}</a>
          </li>

        </ul> <!-- END PAGE TITLE & BREADCRUMB-->
      </div>
    </div><!-- END PAGE HEADER-->

    <div class="row"><!-- BEGIN PAGE CONTENT-->
      <div class="col-md-12">

        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet box blue">
          <div class="portlet-title">
            <div class="caption">
              <i class="fa fa-moble-phone"></i> Scheduled follow ups  for {{ campaign.name }}  campaign
            </div>
            <div class="actions">
              <div class="btn-group">
                <a class="btn default" href="#" data-toggle="dropdown">
                   Columns <i class="fa fa-angle-down"></i>
                </a>
                <div id="sample_2_column_toggler" class="dropdown-menu hold-on-click dropdown-checkboxes pull-right">
                  <label><input type="checkbox" checked data-column="1">Date Added</label>
                  <label><input type="checkbox" checked data-column="2">Schedule</label>
                  <label><input type="checkbox" checked data-column="3">Name</label>
                  <label><input type="checkbox" checked data-column="4">Voice</label>
                  <label><input type="checkbox" checked data-column="5">SMS</label>
                  <label><input type="checkbox" checked data-column="6">MMS</label>
                  <label><input type="checkbox" checked data-column="7">Email</label>
                </div>
              </div>
            </div>
          </div>
          <div class="portlet-body">
            <table class="table table-striped table-bordered table-hover table-full-width" id="sample_2">
              <thead>
              <tr>
                <th></th>
                <th><i class="fa fa-calendar"></i> Date Added</th>
                <th><i class="fa fa-clock-o"></i> Schedule</th>
                <th><i class="fa fa-text"></i> Name</th>
                <th class="hidden-xs" style="background-color:purple">
                  <i class="fa fa-volume-up"></i> Voice
                </th>
                <th class="hidden-xs" style="background-color:steelblue">
                  <i class="fa fa-mobile-phone"></i> SMS
                </th>
                <th class="hidden-xs yellow" style="background-color:orange">
                  <span>
                   <i class="fa fa-instagram"></i> MMS
                  </span>
                </th>
                <th class="hidden-xs yellow" style="background-color:green">
                  <span>
                    <i class="fa fa-envelope"></i> Email
                  </span>
                </th>
              </tr>
              </thead>
              <tbody>
              {% for fu in campaign.fucampaign_set.all %}
                <tr>
                  <td>
                    <a href="/edit-fu/{{ fu.id }}/">
                      <a href="{% url 'fu_edit' fu.id %}"><i class="fa fa-edit"></i>edit</a>
                      <a href="{% url 'fu_delete' fu.id %}" class="fu-delete"><i class="fa fa-trash-o"></i>delete</a>
                    </a>
                  </td>
                  <td>
                    {{ fu.date_created }}
                  </td>
                  <td>
                    {% if fu.custom %}
                      {{ fu.get_duration_display }}
                      {{ fu.send_at }}
                      <i class=" fa fa-question-circle" title="Sent at specified day/hour  after lead capture" style="float:right"></i>
                    {% endif %}
                    {% if fu.recur %}
                      Every  {{ fu.send_at }}
                      {{ fu.get_duration_display }}(s)
                      <i class=" fa fa-question-circle" title="Recurring after specified duration" style="float:right"></i>
                    {% endif %}
                    {% if fu.specific %}
                      {{ fu.sp_date }}
                      <i class="fa fa-question-circle" title="Was sent or will be sent on the specified date and time" style="float:right"></i>
                    {% endif %}
                    {% if fu.onleadcapture %}
                      On lead Capture
                      <i class=" fa fa-question-circle" title="Sent to a lead imidiately he joins campaign" style="float:right"></i>
                    {% endif %}
                    {% if fu.now4leads %}
                      {{ fu.date_created }}
                      <i class=" fa fa-question-circle" title="Sent immidiately to existing leads ie broadcast" style="float:right"></i>
                    {% endif %}
                  </td>
                  <td>
                    <a href="/edit-fu/{{ fu.id }}/">{{ fu.name }}</a>
                  </td>

                  <td>
                    {% if  fu.send_voice %}
                      <i class="fa  fa-check-circle" style="color:forestgreen"></i>
                    {% else %}
                      <i class="fa fa-times-circle" style="color:red"></i>
                    {% endif %}
                  </td>

                  <td>
                    {% if fu.send_sms %}
                      <i class="fa  fa-check-circle" style="color:forestgreen"></i>
                    {% else %}
                      <i class="fa fa-times-circle" style="color:red"></i>
                    {% endif %}
                  </td>

                  <td>
                    {% if  fu.send_mms %}
                      <i class="fa  fa-check-circle" style="color:forestgreen"></i>
                    {% else %}
                      <i class="fa fa-times-circle" style="color:red"></i>
                    {% endif %}
                  </td>

                  <td>
                    {% if  fu.send_email %}
                      <i class="fa  fa-check-circle"
                         style="color:forestgreen"></i>
                    {% else %}
                      <i class="fa fa-times-circle" style="color:red"></i>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
              </tbody>
            </table>

          </div>
        </div>
        <!-- END EXAMPLE TABLE PORTLET-->
      </div>
    </div>

  <form action="" id="cp_dummy">
    <input type="hidden" name="campaign" value="{{ campaign.id }}"/>
    {% csrf_token %}
  </form>


{% endblock content %}

{% block scripts %}
  <!-- BEGIN PAGE LEVEL PLUGINS -->
  <script type="text/javascript" src="{% static 'assets/plugins/select2/select2.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'assets/plugins/data-tables/jquery.dataTables.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'assets/plugins/data-tables/DT_bootstrap.js' %}"></script>
  <!-- END PAGE LEVEL PLUGINS -->
  <!-- BEGIN PAGE LEVEL SCRIPTS -->

  <script src="{% static 'assets/scripts/custom/table-advanced.js' %}"></script>
  <script>
  jQuery(document).ready(function() {

     TableAdvanced.init();
  });
  </script>

{% endblock scripts %}
