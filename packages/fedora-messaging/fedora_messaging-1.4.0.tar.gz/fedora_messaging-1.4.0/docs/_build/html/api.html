
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Developer Interface &#8212; Fedora Messaging 1.1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Message Format" href="wire-format.html" />
    <link rel="prev" title="Converting a fedmsg application" href="tutorial/conversion.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="developer-interface">
<h1>Developer Interface<a class="headerlink" href="#developer-interface" title="Permalink to this headline">¶</a></h1>
<p>This documentation covers the public interfaces fedora_messaging provides.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Documented interfaces follow <a class="reference external" href="http://semver.org/">Semantic Versioning 2.0.0</a>. Any interface
not documented here may change at any time without warning.</p>
</div>
<div class="section" id="publishing">
<span id="pub-api"></span><h2>Publishing<a class="headerlink" href="#publishing" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="fedora_messaging.api.publish">
<code class="descclassname">fedora_messaging.api.</code><code class="descname">publish</code><span class="sig-paren">(</span><em>message</em>, <em>exchange=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/api.html#publish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.api.publish" title="Permalink to this definition">¶</a></dt>
<dd><p>Publish a message to an exchange.</p>
<p>This is a synchronous call, meaning that when this function returns, an
acknowledgment has been received from the message broker and you can be
certain the message was published successfully.</p>
<p>There are some cases where an error occurs despite your message being
successfully published. For example, if a network partition occurs after
the message is received by the broker. Therefore, you may publish duplicate
messages. For complete details, see the <a class="reference internal" href="publishing.html#publishing"><span class="std std-ref">Publishing</span></a> documentation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fedora_messaging</span> <span class="k">import</span> <span class="n">api</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">message</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Hello&#39;</span><span class="p">:</span> <span class="s1">&#39;world&#39;</span><span class="p">},</span> <span class="n">topic</span><span class="o">=</span><span class="s1">&#39;Hi&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">api</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>If an attempt to publish fails because the broker rejects the message, it
is not retried. Connection attempts to the broker can be configured using
the “connection_attempts” and “retry_delay” options in the broker URL. See
<a class="reference external" href="https://pika.readthedocs.io/en/latest/modules/parameters.html#pika.connection.URLParameters" title="(in pika v1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pika.connection.URLParameters</span></code></a> for details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>message</strong> (<a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><em>message.Message</em></a>) – The message to publish.</li>
<li><strong>exchange</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the AMQP exchange to publish to; defaults to
<a class="reference internal" href="configuration.html#conf-publish-exchange"><span class="std std-ref">publish_exchange</span></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#fedora_messaging.exceptions.PublishReturned" title="fedora_messaging.exceptions.PublishReturned"><code class="xref py py-exc docutils literal notranslate"><span class="pre">fedora_messaging.exceptions.PublishReturned</span></code></a> – Raised if the broker rejects the
message.</li>
<li><a class="reference internal" href="#fedora_messaging.exceptions.ConnectionException" title="fedora_messaging.exceptions.ConnectionException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">fedora_messaging.exceptions.ConnectionException</span></code></a> – Raised if a connection error
occurred before the publish confirmation arrived.</li>
<li><a class="reference internal" href="#fedora_messaging.exceptions.ValidationError" title="fedora_messaging.exceptions.ValidationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">fedora_messaging.exceptions.ValidationError</span></code></a> – Raised if the message
fails validation with its JSON schema. This only depends on the
message you are trying to send, the AMQP server is not involved.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="subscribing">
<span id="sub-api"></span><h2>Subscribing<a class="headerlink" href="#subscribing" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="fedora_messaging.api.consume">
<code class="descclassname">fedora_messaging.api.</code><code class="descname">consume</code><span class="sig-paren">(</span><em>callback</em>, <em>bindings=None</em>, <em>queues=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/api.html#consume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.api.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a message consumer that executes the provided callback when messages are
received.</p>
<p>This API is blocking and will not return until the process receives a signal
from the operating system.</p>
<p>The callback receives a single positional argument, the message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fedora_messaging</span> <span class="k">import</span> <span class="n">api</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bindings</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;amq.topic&#39;</span><span class="p">,</span> <span class="s1">&#39;queue&#39;</span><span class="p">:</span> <span class="s1">&#39;demo&#39;</span><span class="p">,</span> <span class="s1">&#39;routing_keys&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;#&#39;</span><span class="p">]}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">queues</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;demo&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;durable&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;auto_delete&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;exclusive&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{}}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">api</span><span class="o">.</span><span class="n">consume</span><span class="p">(</span><span class="n">my_callback</span><span class="p">,</span> <span class="n">bindings</span><span class="o">=</span><span class="n">bindings</span><span class="p">,</span> <span class="n">queues</span><span class="o">=</span><span class="n">queues</span><span class="p">)</span>
</pre></div>
</div>
<p>If the bindings and queue arguments are not provided, they will be loaded from
the configuration.</p>
<p>For complete documentation on writing consumers, see the <a class="reference internal" href="consuming.html#consumers"><span class="std std-ref">Consumers</span></a>
documentation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>callback</strong> (<em>callable</em>) – A callable object that accepts one positional argument,
a <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code>.</li>
<li><strong>bindings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em> or </em><em>list of dict</em>) – Bindings to declare before consuming. This
should be the same format as the <a class="reference internal" href="configuration.html#conf-bindings"><span class="std std-ref">bindings</span></a> configuration.</li>
<li><strong>queues</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – The queue or queues to declare and consume from. This should be
in the same format as the <a class="reference internal" href="configuration.html#conf-queues"><span class="std std-ref">queues</span></a> configuration dictionary where
each key is a queue name and each value is a dictionary of settings for that
queue.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#fedora_messaging.exceptions.HaltConsumer" title="fedora_messaging.exceptions.HaltConsumer"><code class="xref py py-exc docutils literal notranslate"><span class="pre">fedora_messaging.exceptions.HaltConsumer</span></code></a> – If the consumer requests that
it be stopped.</li>
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If the consumer provide callback that is not a class that
implements __call__ and is not a function, if the bindings argument
is not a dict or list of dicts with the proper keys, or if the queues
argument isn’t a dict with the proper keys.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-fedora_messaging.signals">
<span id="signals"></span><span id="signal-api"></span><h2>Signals<a class="headerlink" href="#module-fedora_messaging.signals" title="Permalink to this headline">¶</a></h2>
<p>Signals sent by fedora_messaging APIs using <a class="reference external" href="https://pythonhosted.org/blinker/index.html#blinker.base.Signal" title="(in Blinker v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">blinker.base.Signal</span></code></a> signals.</p>
<dl class="data">
<dt id="fedora_messaging.api.pre_publish_signal">
<code class="descclassname">fedora_messaging.api.</code><code class="descname">pre_publish_signal</code><em class="property"> = &lt;blinker.base.NamedSignal object at 0x7fa14228d470; 'pre_publish'&gt;</em><a class="headerlink" href="#fedora_messaging.api.pre_publish_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>A signal triggered before the message is published. The signal handler should
accept a single keyword argument, <code class="docutils literal notranslate"><span class="pre">message</span></code>, which is the instance of the
<a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">fedora_messaging.message.Message</span></code></a> being sent. It is acceptable to
mutate the message, but the <code class="docutils literal notranslate"><span class="pre">validate</span></code> method will be called on it after this
signal.</p>
</dd></dl>

<dl class="data">
<dt id="fedora_messaging.api.publish_signal">
<code class="descclassname">fedora_messaging.api.</code><code class="descname">publish_signal</code><em class="property"> = &lt;blinker.base.NamedSignal object at 0x7fa141a0cc18; 'publish_success'&gt;</em><a class="headerlink" href="#fedora_messaging.api.publish_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>A signal triggered after a message is published successfully. The signal
handler should accept a single keyword argument, <code class="docutils literal notranslate"><span class="pre">message</span></code>, which is the
instance of the <a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">fedora_messaging.message.Message</span></code></a> that was sent.</p>
</dd></dl>

<dl class="data">
<dt id="fedora_messaging.api.publish_failed_signal">
<code class="descclassname">fedora_messaging.api.</code><code class="descname">publish_failed_signal</code><em class="property"> = &lt;blinker.base.NamedSignal object at 0x7fa1419b38d0; 'publish_failed_signal'&gt;</em><a class="headerlink" href="#fedora_messaging.api.publish_failed_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>A signal triggered after a message fails to publish for some reason. The signal
handler should accept two keyword argument, <code class="docutils literal notranslate"><span class="pre">message</span></code>, which is the instance
of the <a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">fedora_messaging.message.Message</span></code></a> that failed to be sent, and
<code class="docutils literal notranslate"><span class="pre">error</span></code>, the exception that was raised.</p>
</dd></dl>

</div>
<div class="section" id="module-fedora_messaging.message">
<span id="message-schemas"></span><span id="message-api"></span><h2>Message Schemas<a class="headerlink" href="#module-fedora_messaging.message" title="Permalink to this headline">¶</a></h2>
<p>This module defines the base class of message objects and keeps a registry of
known message implementations. This registry is populated from Python entry
points in the “fedora.messages” group.</p>
<p>To implement your own message schema, simply create a class that inherits the
<a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> class, and add an entry point in your Python package under the
“fedora.messages” group. For example, an entry point for the <a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a>
schema would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;fedora.messages&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;base.message=fedora_messaging.message:Message&#39;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The entry point name must be unique to your application and is used to map
messages to your message class, so it’s best to prefix it with your application
name (e.g. <code class="docutils literal notranslate"><span class="pre">bodhi.new_update_messageV1</span></code>). When publishing, the Fedora
Messaging library will add a header with the entry point name of the class used
so the consumer can locate the correct schema.</p>
<p>Since every client needs to have the message schema installed, you should define
this class in a small Python package of its own.</p>
<dl class="class">
<dt id="fedora_messaging.message.Message">
<em class="property">class </em><code class="descclassname">fedora_messaging.message.</code><code class="descname">Message</code><span class="sig-paren">(</span><em>body=None</em>, <em>headers=None</em>, <em>topic=None</em>, <em>properties=None</em>, <em>severity=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/message.html#Message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.message.Message" title="Permalink to this definition">¶</a></dt>
<dd><p>Messages are simply JSON-encoded objects. This allows message authors to
define a schema and implement Python methods to abstract the raw message
from the user. This allows the schema to change and evolve without breaking
the user-facing API.</p>
<p>A message class includes a topic. This topic is used by message consumers
to filter what messages they receive. Topics should be a string of words
separated by ‘.’ characters, with a length limit of 255 bytes. Because of
this limit, it is best to avoid non-ASCII characters as well as
variable-length components where the total size of the topic would exceed
255 bytes.</p>
<dl class="attribute">
<dt id="fedora_messaging.message.Message.id">
<code class="descname">id</code><a class="headerlink" href="#fedora_messaging.message.Message.id" title="Permalink to this definition">¶</a></dt>
<dd><p>The message id as a unicode string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">six.text_type</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.topic">
<code class="descname">topic</code><a class="headerlink" href="#fedora_messaging.message.Message.topic" title="Permalink to this definition">¶</a></dt>
<dd><p>The message topic as a unicode string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">six.text_type</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.headers_schema">
<code class="descname">headers_schema</code><a class="headerlink" href="#fedora_messaging.message.Message.headers_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://json-schema.org/">JSON schema</a> to be used with
<a class="reference external" href="https://python-jsonschema.readthedocs.io/en/latest/validate/#jsonschema.validate" title="(in jsonschema v3.0.0a4.dev71+g6f10ce6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">jsonschema.validate()</span></code></a> to validate the message headers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.body_schema">
<code class="descname">body_schema</code><a class="headerlink" href="#fedora_messaging.message.Message.body_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://json-schema.org/">JSON schema</a> to be used with
<a class="reference external" href="https://python-jsonschema.readthedocs.io/en/latest/validate/#jsonschema.validate" title="(in jsonschema v3.0.0a4.dev71+g6f10ce6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">jsonschema.validate()</span></code></a> to validate the message headers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.severity">
<code class="descname">severity</code><a class="headerlink" href="#fedora_messaging.message.Message.severity" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer that indicates the severity of the message. This is
used to determine what messages to notify end users about and should be
<a class="reference internal" href="#fedora_messaging.message.DEBUG" title="fedora_messaging.message.DEBUG"><code class="xref py py-data docutils literal notranslate"><span class="pre">DEBUG</span></code></a>, <a class="reference internal" href="#fedora_messaging.message.INFO" title="fedora_messaging.message.INFO"><code class="xref py py-data docutils literal notranslate"><span class="pre">INFO</span></code></a>, <a class="reference internal" href="#fedora_messaging.message.WARNING" title="fedora_messaging.message.WARNING"><code class="xref py py-data docutils literal notranslate"><span class="pre">WARNING</span></code></a>, or <a class="reference internal" href="#fedora_messaging.message.ERROR" title="fedora_messaging.message.ERROR"><code class="xref py py-data docutils literal notranslate"><span class="pre">ERROR</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.queue">
<code class="descname">queue</code><a class="headerlink" href="#fedora_messaging.message.Message.queue" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the queue this message arrived through.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>headers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A set of message headers. Consult the headers schema for
expected keys and values.</li>
<li><strong>body</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – The message body. Consult the body schema for expected keys
and values.</li>
<li><strong>topic</strong> (<em>six.text_type</em>) – The message topic as a unicode string. If this is
not provided, the default topic for the class is used.</li>
<li><strong>properties</strong> (<em>pika.BasicProperties</em>) – The AMQP properties. If this is not
provided, they will be generated.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="fedora_messaging.message.Message.agent_avatar">
<code class="descname">agent_avatar</code><a class="headerlink" href="#fedora_messaging.message.Message.agent_avatar" title="Permalink to this definition">¶</a></dt>
<dd><p>An URL to the avatar of the user who caused the action.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The URL to the user’s avatar.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)">None</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.app_icon">
<code class="descname">app_icon</code><a class="headerlink" href="#fedora_messaging.message.Message.app_icon" title="Permalink to this definition">¶</a></dt>
<dd><p>An URL to the icon of the application that generated the message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The URL to the app’s icon.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)">None</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.containers">
<code class="descname">containers</code><a class="headerlink" href="#fedora_messaging.message.Message.containers" title="Permalink to this definition">¶</a></dt>
<dd><p>List of containers affected by the action that generated this message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of affected container names.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.flatpaks">
<code class="descname">flatpaks</code><a class="headerlink" href="#fedora_messaging.message.Message.flatpaks" title="Permalink to this definition">¶</a></dt>
<dd><p>List of flatpaks affected by the action that generated this message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of affected flatpaks names.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.modules">
<code class="descname">modules</code><a class="headerlink" href="#fedora_messaging.message.Message.modules" title="Permalink to this definition">¶</a></dt>
<dd><p>List of modules affected by the action that generated this message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of affected module names.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.packages">
<code class="descname">packages</code><a class="headerlink" href="#fedora_messaging.message.Message.packages" title="Permalink to this definition">¶</a></dt>
<dd><p>List of packages affected by the action that generated this message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of affected package names.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.summary">
<code class="descname">summary</code><a class="headerlink" href="#fedora_messaging.message.Message.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>A short, human-readable representation of this message.</p>
<p>This should provide a short summary of the message, much like the subject line
of an email.</p>
<p>The default implementation is to simply return the message topic.</p>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.url">
<code class="descname">url</code><a class="headerlink" href="#fedora_messaging.message.Message.url" title="Permalink to this definition">¶</a></dt>
<dd><p>An URL to the action that caused this message to be emitted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A relevant URL.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)">None</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.message.Message.usernames">
<code class="descname">usernames</code><a class="headerlink" href="#fedora_messaging.message.Message.usernames" title="Permalink to this definition">¶</a></dt>
<dd><p>List of users affected by the action that generated this message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of affected usernames.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a>(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.message.Message.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/message.html#Message.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.message.Message.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the headers and body with the message schema, if any.</p>
<p>In addition to the user-provided schema, all messages are checked against
the base schema which requires certain message headers and the that body
be a JSON object.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This method should not be overridden by sub-classes.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">jsonschema.ValidationError</span></code> – If either the message headers or the message body
are invalid.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">jsonschema.SchemaError</span></code> – If either the message header schema or the message body
schema are invalid.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="fedora_messaging.message.get_class">
<code class="descclassname">fedora_messaging.message.</code><code class="descname">get_class</code><span class="sig-paren">(</span><em>schema_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/message.html#get_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.message.get_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the message class associated with the schema name.</p>
<p>If no match is found, the default schema is returned and a warning is logged.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>schema_name</strong> (<em>six.text_type</em>) – The name of the <a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> sub-class;
this is typically the Python path.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A sub-class of <a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> to create the message from.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message">Message</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="message-severity">
<span id="id2"></span><h3>Message Severity<a class="headerlink" href="#message-severity" title="Permalink to this headline">¶</a></h3>
<p>Each message can have a severity associated with it. The severity is used by
applications like the notification service to determine what messages to send
to users. The severity can be set at the class level, or on a message-by-message
basis. The following are valid severity levels:</p>
<dl class="data">
<dt id="fedora_messaging.message.DEBUG">
<code class="descclassname">fedora_messaging.message.</code><code class="descname">DEBUG</code><em class="property"> = 10</em><a class="headerlink" href="#fedora_messaging.message.DEBUG" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates the message is for debugging or is otherwise very low priority. Users
will not be notified unless they’ve explicitly requested DEBUG level messages.</p>
</dd></dl>

<dl class="data">
<dt id="fedora_messaging.message.INFO">
<code class="descclassname">fedora_messaging.message.</code><code class="descname">INFO</code><em class="property"> = 20</em><a class="headerlink" href="#fedora_messaging.message.INFO" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates the message is informational. End users will not receive notifications
for these messages by default. For example, automated tests passed for their
package.</p>
</dd></dl>

<dl class="data">
<dt id="fedora_messaging.message.WARNING">
<code class="descclassname">fedora_messaging.message.</code><code class="descname">WARNING</code><em class="property"> = 30</em><a class="headerlink" href="#fedora_messaging.message.WARNING" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates a problem or an otherwise important problem. Users are notified of
these messages when they pertain to packages they are associated with by default.
For example, one or more automated tests failed against their package.</p>
</dd></dl>

<dl class="data">
<dt id="fedora_messaging.message.ERROR">
<code class="descclassname">fedora_messaging.message.</code><code class="descname">ERROR</code><em class="property"> = 40</em><a class="headerlink" href="#fedora_messaging.message.ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates a critically important message that users should act upon as soon as
possible. For example, their package no longer builds.</p>
</dd></dl>

</div>
<div class="section" id="module-fedora_messaging.schema_utils">
<span id="utilities"></span><span id="exceptions-api"></span><h3>Utilities<a class="headerlink" href="#module-fedora_messaging.schema_utils" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">schema_utils</span></code> module contains utilities that may be useful when writing
the Python API of your message schemas.</p>
<dl class="function">
<dt id="fedora_messaging.schema_utils.libravatar_url">
<code class="descclassname">fedora_messaging.schema_utils.</code><code class="descname">libravatar_url</code><span class="sig-paren">(</span><em>email=None</em>, <em>openid=None</em>, <em>size=64</em>, <em>default='retro'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/schema_utils.html#libravatar_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.schema_utils.libravatar_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the URL to an avatar from libravatar.</p>
<p>Either the user’s email or openid must be provided.</p>
<p>If you want to use Libravatar federation (through DNS), you should install
and use the <code class="docutils literal notranslate"><span class="pre">libravatar</span></code> library instead. Check out the
<code class="docutils literal notranslate"><span class="pre">libravatar.libravatar_url()</span></code> function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>email</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The user’s email</li>
<li><strong>openid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The user’s OpenID</li>
<li><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Size of the avatar in pixels (it’s a square).</li>
<li><strong>default</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Default avatar to return if not found.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The URL to the avatar image.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> – If neither email nor openid are provided.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="fedora_messaging.schema_utils.user_avatar_url">
<code class="descclassname">fedora_messaging.schema_utils.</code><code class="descname">user_avatar_url</code><span class="sig-paren">(</span><em>username</em>, <em>size=64</em>, <em>default='retro'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/schema_utils.html#user_avatar_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.schema_utils.user_avatar_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the avatar URL of the provided Fedora username.</p>
<p>The URL is returned from the Libravatar service.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>username</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The username to get the avatar of.</li>
<li><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Size of the avatar in pixels (it’s a square).</li>
<li><strong>default</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Default avatar to return if not found.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The URL to the avatar image.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-fedora_messaging.exceptions">
<span id="exceptions"></span><h2>Exceptions<a class="headerlink" href="#module-fedora_messaging.exceptions" title="Permalink to this headline">¶</a></h2>
<p>Exceptions raised by Fedora Messaging.</p>
<dl class="exception">
<dt id="fedora_messaging.exceptions.BadDeclaration">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">BadDeclaration</code><span class="sig-paren">(</span><em>obj_type</em>, <em>description</em>, <em>reason</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#BadDeclaration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.BadDeclaration" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when declaring an object in AMQP fails.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>obj_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The type of object being declared. One of “binding”,
“queue”, or “exchange”.</li>
<li><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – The description of the object.</li>
<li><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The reason the server gave for rejecting the declaration.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.BaseException">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">BaseException</code><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#BaseException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.BaseException" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for all exceptions raised by fedora_messaging.</p>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.ConfigurationException">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">ConfigurationException</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#ConfigurationException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.ConfigurationException" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when there’s an invalid configuration setting</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A detailed description of the configuration problem
which is presented to the user.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.ConnectionException">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">ConnectionException</code><span class="sig-paren">(</span><em>reason=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#ConnectionException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.ConnectionException" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if a general connection error occurred.</p>
<p>You may handle this exception by logging it and resending or discarding the
message.</p>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.ConsumeException">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">ConsumeException</code><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#ConsumeException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.ConsumeException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for exceptions related to consuming.</p>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.Drop">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">Drop</code><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#Drop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.Drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Consumer callbacks should raise this to indicate they wish the message they
are currently processing to be dropped.</p>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.HaltConsumer">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">HaltConsumer</code><span class="sig-paren">(</span><em>exit_code=0</em>, <em>reason=None</em>, <em>requeue=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#HaltConsumer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.HaltConsumer" title="Permalink to this definition">¶</a></dt>
<dd><p>Consumer callbacks should raise this exception if they wish the consumer to
be shut down.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>exit_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The exit code to use when halting.</li>
<li><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A reason for halting, presented to the user.</li>
<li><strong>requeue</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If true, the message is re-queued for later processing.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.Nack">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">Nack</code><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#Nack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.Nack" title="Permalink to this definition">¶</a></dt>
<dd><p>Consumer callbacks should raise this to indicate they wish the message they
are currently processing to be re-queued.</p>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.NoFreeChannels">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">NoFreeChannels</code><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#NoFreeChannels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.NoFreeChannels" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a connection has reached its channel limit</p>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.PublishException">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">PublishException</code><span class="sig-paren">(</span><em>reason=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#PublishException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.PublishException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for exceptions related to publishing.</p>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.PublishReturned">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">PublishReturned</code><span class="sig-paren">(</span><em>reason=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#PublishReturned"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.PublishReturned" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when the broker rejects and returns the message to the publisher.</p>
<p>You may handle this exception by logging it and resending or discarding the
message.</p>
</dd></dl>

<dl class="exception">
<dt id="fedora_messaging.exceptions.ValidationError">
<em class="property">exception </em><code class="descclassname">fedora_messaging.exceptions.</code><code class="descname">ValidationError</code><a class="reference internal" href="_modules/fedora_messaging/exceptions.html#ValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.exceptions.ValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>This error is raised when a message fails validation with its JSON schema</p>
<p>This exception can be raised on an incoming or outgoing message. No need to
catch this exception when publishing, it should warn you during development
and testing that you’re trying to publish a message with a different
format, and that you should either fix it or update the schema.</p>
</dd></dl>

</div>
<div class="section" id="twisted">
<span id="twisted-api"></span><h2>Twisted<a class="headerlink" href="#twisted" title="Permalink to this headline">¶</a></h2>
<p>In addition to the synchronous API, a Twisted API is provided for applications
that need an asynchronous API. This API requires Twisted 16.1.0 or greater.</p>
<div class="section" id="module-fedora_messaging.twisted.protocol">
<span id="protocol"></span><h3>Protocol<a class="headerlink" href="#module-fedora_messaging.twisted.protocol" title="Permalink to this headline">¶</a></h3>
<p>The core Twisted interface, a protocol represent a specific connection to the
AMQP broker. When automatic reconnecting is required, the
<a class="reference internal" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory" title="fedora_messaging.twisted.factory.FedoraMessagingFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">fedora_messaging.twisted.factory.FedoraMessagingFactory</span></code></a> class should
be used to produce configured instances of <a class="reference internal" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol" title="fedora_messaging.twisted.protocol.FedoraMessagingProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">FedoraMessagingProtocol</span></code></a>.</p>
<p><a class="reference internal" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol" title="fedora_messaging.twisted.protocol.FedoraMessagingProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">FedoraMessagingProtocol</span></code></a> is based on pika’s Twisted Protocol. It
implements message schema validation when publishing and subscribing, as well
as a few convenience methods for declaring multiple objects at once.</p>
<p>For an overview of Twisted clients, see the <a class="reference external" href="https://twistedmatrix.com/documents/current/core/howto/clients.html#protocol">Twisted client documentation</a>.</p>
<dl class="class">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol">
<em class="property">class </em><code class="descclassname">fedora_messaging.twisted.protocol.</code><code class="descname">FedoraMessagingProtocol</code><span class="sig-paren">(</span><em>parameters</em>, <em>confirms=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol" title="Permalink to this definition">¶</a></dt>
<dd><p>A Twisted Protocol for the Fedora Messaging system.</p>
<p>This protocol builds on the generic pika AMQP protocol to add calls
specific to the Fedora Messaging implementation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>parameters</strong> (<em>pika.ConnectionParameters</em>) – The connection parameters.</li>
<li><strong>confirms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, all outgoing messages will require a
confirmation from the server, and the Deferred returned from
the publish call will wait for that confirmation.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.bind_queues">
<code class="descname">bind_queues</code><span class="sig-paren">(</span><em>bindings</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.bind_queues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.bind_queues" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare a set of bindings between queues and exchanges.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>bindings</strong> (<em>list of dict</em>) – A list of binding definitions. Each dictionary
must contain the “queue” key whose value is the name of the queue
to create the binding on, as well as the “exchange” key whose value
should be the name of the exchange to bind to. Additional acceptable
keys are any keyword arguments accepted by
<a class="reference external" href="https://pika.readthedocs.io/en/latest/modules/channel.html#pika.channel.Channel.queue_bind" title="(in pika v1)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pika.channel.Channel.queue_bind()</span></code></a>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">NoFreeChannels</span></code> – If there are no available channels on this connection.
If this occurs, you can either reduce the number of consumers on this
connection or create an additional connection.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">BadDeclaration</span></code> – If a binding could not be declared. This can occur if the
queue or exchange don’t exist, or if they do, but the current user does
not have permissions to create bindings.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.cancel">
<code class="descname">cancel</code><span class="sig-paren">(</span><em>queue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel the consumer for a queue.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queue</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the queue the consumer is subscribed to.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>A Deferred that fires when the consumer</dt>
<dd>is canceled, or None if the consumer was already canceled. Wrap
the call in <code class="xref py py-func docutils literal notranslate"><span class="pre">defer.maybeDeferred()</span></code> to always receive a Deferred.</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">defer.Deferred</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.connectionReady">
<code class="descname">connectionReady</code><span class="sig-paren">(</span><em>res=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.connectionReady"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.connectionReady" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback invoked when the AMQP connection is ready.</p>
<p>This API is not meant for users.</p>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.consume">
<code class="descname">consume</code><span class="sig-paren">(</span><em>callback</em>, <em>queue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.consume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a message consumer that executes the provided callback when
messages are received.</p>
<p>The queue must exist prior to calling this method.  If a consumer
already exists for the given queue, the callback is simply updated and
any new messages for that consumer use the new callback.</p>
<p>If <a class="reference internal" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.resumeProducing" title="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.resumeProducing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resumeProducing()</span></code></a> has not been called when this method is called,
it will be called for you.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>callback</strong> (<em>callable</em>) – The callback to invoke when a message is received.</li>
<li><strong>queue</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the queue to consume from.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A namedtuple that identifies this consumer.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#fedora_messaging.twisted.protocol.Consumer" title="fedora_messaging.twisted.protocol.Consumer">Consumer</a></p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>NoFreeChannels: If there are no available channels on this connection.</dt>
<dd>If this occurs, you can either reduce the number of consumers on this
connection or create an additional connection.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.declare_exchanges">
<code class="descname">declare_exchanges</code><span class="sig-paren">(</span><em>exchanges</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.declare_exchanges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.declare_exchanges" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare a number of exchanges at once.</p>
<p>This simply wraps the <a class="reference external" href="https://pika.readthedocs.io/en/latest/modules/channel.html#pika.channel.Channel.exchange_declare" title="(in pika v1)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pika.channel.Channel.exchange_declare()</span></code></a>
method and deals with error handling and channel allocation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>exchanges</strong> (<em>list of dict</em>) – <p>A list of dictionaries, where each dictionary
represents an exchange. Each dictionary can have the following keys:</p>
<blockquote>
<div><ul class="simple">
<li>exchange (str): The exchange’s name</li>
<li>exchange_type (str): The type of the exchange (“direct”, “topic”, etc)</li>
<li>passive (bool): If true, this will just assert that the exchange exists,
but won’t create it if it doesn’t.</li>
<li>durable (bool): Whether or not the exchange is durable</li>
<li>arguments (dict): Extra arguments for the exchange’s creation.</li>
</ul>
</div></blockquote>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">NoFreeChannels</span></code> – If there are no available channels on this connection.
If this occurs, you can either reduce the number of consumers on this
connection or create an additional connection.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">BadDeclaration</span></code> – If an exchange could not be declared. This can occur
if the exchange already exists, but does its type does not match
(e.g. it is declared as a “topic” exchange, but exists as a “direct”
exchange). It can also occur if it does not exist, but the current
user does not have permissions to create the object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.declare_queues">
<code class="descname">declare_queues</code><span class="sig-paren">(</span><em>queues</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.declare_queues"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.declare_queues" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare a list of queues.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>queues</strong> (<em>list of dict</em>) – <p>A list of dictionaries, where each dictionary
represents an exchange. Each dictionary can have the following keys:</p>
<blockquote>
<div><ul class="simple">
<li>queue (str): The name of the queue</li>
<li>passive (bool): If true, this will just assert that the queue exists,
but won’t create it if it doesn’t.</li>
<li>durable (bool): Whether or not the queue is durable</li>
<li>exclusive (bool): Whether or not the queue is exclusive to this connection.</li>
<li>auto_delete (bool): Whether or not the queue should be automatically
deleted once this connection ends.</li>
<li>arguments (dict): Additional arguments for the creation of the queue.</li>
</ul>
</div></blockquote>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">NoFreeChannels</span></code> – If there are no available channels on this connection.
If this occurs, you can either reduce the number of consumers on this
connection or create an additional connection.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">BadDeclaration</span></code> – If a queue could not be declared. This can occur
if the queue already exists, but does its type does not match
(e.g. it is declared as a durable queue, but exists as a non-durable
queue). It can also occur if it does not exist, but the current
user does not have permissions to create the object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.pauseProducing">
<code class="descname">pauseProducing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.pauseProducing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.pauseProducing" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause the reception of messages by canceling all existing consumers.
This does not disconnect from the server.</p>
<p>Message reception can be resumed with <a class="reference internal" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.resumeProducing" title="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.resumeProducing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resumeProducing()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">fired when the production is paused.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">Deferred</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.publish">
<code class="descname">publish</code><span class="sig-paren">(</span><em>message</em>, <em>exchange</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.publish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.publish" title="Permalink to this definition">¶</a></dt>
<dd><p>Publish a <a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">fedora_messaging.message.Message</span></code></a> to an <a class="reference external" href="https://www.rabbitmq.com/tutorials/amqp-concepts.html#exchanges">exchange</a>
on the message broker.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>message</strong> (<a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><em>message.Message</em></a>) – The message to publish.</li>
<li><strong>exchange</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the AMQP exchange to publish to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">NoFreeChannels</span></code> – If there are no available channels on this connection.
If this occurs, you can either reduce the number of consumers on this
connection or create an additional connection.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">PublishReturned</span></code> – If the broker rejected the message. This can happen if
there are resource limits that have been reached (full disk, for example)
or if the message will be routed to 0 queues and the exchange is set to
reject such messages.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.resumeProducing">
<code class="descname">resumeProducing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.resumeProducing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.resumeProducing" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts or resumes the retrieval of messages from the server queue.</p>
<p>This method starts receiving messages from the server, they will be
passed to the consumer callback.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is called automatically when <a class="reference internal" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.consume" title="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.consume"><code class="xref py py-meth docutils literal notranslate"><span class="pre">consume()</span></code></a> is called,
so users should not need to call this unless <a class="reference internal" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.pauseProducing" title="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.pauseProducing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pauseProducing()</span></code></a>
has been called.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">fired when the production is ready to start</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">defer.Deferred</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.protocol.FedoraMessagingProtocol.stopProducing">
<code class="descname">stopProducing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/protocol.html#FedoraMessagingProtocol.stopProducing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol.stopProducing" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop producing messages and disconnect from the server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">fired when the production is stopped.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">Deferred</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="fedora_messaging.twisted.protocol.Consumer">
<em class="property">class </em><code class="descclassname">fedora_messaging.twisted.protocol.</code><code class="descname">Consumer</code><span class="sig-paren">(</span><em>tag</em>, <em>queue</em>, <em>callback</em>, <em>channel</em><span class="sig-paren">)</span><a class="headerlink" href="#fedora_messaging.twisted.protocol.Consumer" title="Permalink to this definition">¶</a></dt>
<dd><p>A namedtuple that represents a AMQP consumer.</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">tag</span></code> field is the consumer’s AMQP tag (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">queue</span></code> field is the name of the queue it’s consuming from (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">callback</span></code> field is the function called for each message (a callable).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">channel</span></code> is the AMQP channel used for the consumer
(<a class="reference external" href="https://pika.readthedocs.io/en/latest/modules/adapters/twisted.html#pika.adapters.twisted_connection.TwistedChannel" title="(in pika v1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pika.adapters.twisted_connection.TwistedChannel</span></code></a>).</li>
</ul>
<dl class="attribute">
<dt id="fedora_messaging.twisted.protocol.Consumer.callback">
<code class="descname">callback</code><a class="headerlink" href="#fedora_messaging.twisted.protocol.Consumer.callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.twisted.protocol.Consumer.channel">
<code class="descname">channel</code><a class="headerlink" href="#fedora_messaging.twisted.protocol.Consumer.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.twisted.protocol.Consumer.queue">
<code class="descname">queue</code><a class="headerlink" href="#fedora_messaging.twisted.protocol.Consumer.queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.twisted.protocol.Consumer.tag">
<code class="descname">tag</code><a class="headerlink" href="#fedora_messaging.twisted.protocol.Consumer.tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-fedora_messaging.twisted.factory">
<span id="factory"></span><h3>Factory<a class="headerlink" href="#module-fedora_messaging.twisted.factory" title="Permalink to this headline">¶</a></h3>
<p>A Twisted Factory for creating and configuring instances of the
<a class="reference internal" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol" title="fedora_messaging.twisted.protocol.FedoraMessagingProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">FedoraMessagingProtocol</span></code></a>.</p>
<p>A factory is used to implement automatic re-connections by producing protocol
instances (connections) on demand. Twisted uses factories for its services APIs.</p>
<p>See the <a class="reference external" href="https://twistedmatrix.com/documents/current/core/howto/clients.html#clientfactory">Twisted client</a>
documentation for more information.</p>
<dl class="class">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory">
<em class="property">class </em><code class="descclassname">fedora_messaging.twisted.factory.</code><code class="descname">FedoraMessagingFactory</code><span class="sig-paren">(</span><em>parameters</em>, <em>confirms=True</em>, <em>exchanges=None</em>, <em>queues=None</em>, <em>bindings=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconnecting factory for the Fedora Messaging protocol.</p>
<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.buildProtocol">
<code class="descname">buildProtocol</code><span class="sig-paren">(</span><em>addr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.buildProtocol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.buildProtocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the Protocol instance.</p>
<p>See the documentation of
<cite>twisted.internet.protocol.ReconnectingClientFactory</cite> for details.</p>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.cancel">
<code class="descname">cancel</code><span class="sig-paren">(</span><em>queue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel the consumer for a queue.</p>
<p>This removes the consumer from the list of consumers to be configured for
every connection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>queue</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the queue the consumer is subscribed to.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>Either a Deferred that fires when the consumer</dt>
<dd>is canceled, or None if the consumer was already canceled. Wrap
the call in <code class="xref py py-func docutils literal notranslate"><span class="pre">defer.maybeDeferred()</span></code> to always receive a Deferred.</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">defer.Deferred or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)">None</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.clientConnectionFailed">
<code class="descname">clientConnectionFailed</code><span class="sig-paren">(</span><em>connector</em>, <em>reason</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.clientConnectionFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.clientConnectionFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the client has failed to connect to the broker.</p>
<p>See the documentation of
<cite>twisted.internet.protocol.ReconnectingClientFactory</cite> for details.</p>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.clientConnectionLost">
<code class="descname">clientConnectionLost</code><span class="sig-paren">(</span><em>connector</em>, <em>reason</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.clientConnectionLost"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.clientConnectionLost" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the connection to the broker has been lost.</p>
<p>See the documentation of
<cite>twisted.internet.protocol.ReconnectingClientFactory</cite> for details.</p>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.consume">
<code class="descname">consume</code><span class="sig-paren">(</span><em>callback</em>, <em>queue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.consume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.consume" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a new consumer.</p>
<p>This consumer will be configured for every protocol this factory
produces so it will be reconfigured on network failures. If a connection
is already active, the consumer will be added to it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>callback</strong> (<em>callable</em>) – The callback to invoke when a message arrives.</li>
<li><strong>queue</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the queue to consume from.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.protocol">
<code class="descname">protocol</code><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#fedora_messaging.twisted.protocol.FedoraMessagingProtocol" title="fedora_messaging.twisted.protocol.FedoraMessagingProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">fedora_messaging.twisted.protocol.FedoraMessagingProtocol</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.publish">
<code class="descname">publish</code><span class="sig-paren">(</span><em>message</em>, <em>exchange=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.publish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.publish" title="Permalink to this definition">¶</a></dt>
<dd><p>Publish a <a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">fedora_messaging.message.Message</span></code></a> to an <a class="reference external" href="https://www.rabbitmq.com/tutorials/amqp-concepts.html#exchanges">exchange</a>
on the message broker. This call will survive connection failures and try
until it succeeds or is canceled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>message</strong> (<a class="reference internal" href="#fedora_messaging.message.Message" title="fedora_messaging.message.Message"><em>message.Message</em></a>) – The message to publish.</li>
<li><strong>exchange</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the AMQP exchange to publish to; defaults
to <a class="reference internal" href="configuration.html#conf-publish-exchange"><span class="std std-ref">publish_exchange</span></a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A deferred that fires when the message is published.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">defer.Deferred</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">PublishReturned</span></code> – If the published message is rejected by the broker.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">ConnectionException</span></code> – If a connection error occurs while publishing. Calling
this method again will wait for the next connection and publish when it
is available.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.startedConnecting">
<code class="descname">startedConnecting</code><span class="sig-paren">(</span><em>connector</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.startedConnecting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.startedConnecting" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the connection to the broker has started.</p>
<p>See the documentation of
<cite>twisted.internet.protocol.ReconnectingClientFactory</cite> for details.</p>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.stopFactory">
<code class="descname">stopFactory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.stopFactory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.stopFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the factory.</p>
<p>See the documentation of
<cite>twisted.internet.protocol.ReconnectingClientFactory</cite> for details.</p>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.stopTrying">
<code class="descname">stopTrying</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.stopTrying"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.stopTrying" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop trying to reconnect to the broker.</p>
<p>See the documentation of
<cite>twisted.internet.protocol.ReconnectingClientFactory</cite> for details.</p>
</dd></dl>

<dl class="method">
<dt id="fedora_messaging.twisted.factory.FedoraMessagingFactory.whenConnected">
<code class="descname">whenConnected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/factory.html#FedoraMessagingFactory.whenConnected"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory.whenConnected" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next connected protocol instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>A deferred that results in a connected</dt>
<dd><code class="xref py py-class docutils literal notranslate"><span class="pre">FedoraMessagingProtocol</span></code>.</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">defer.Deferred</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-fedora_messaging.twisted.service">
<span id="service"></span><h3>Service<a class="headerlink" href="#module-fedora_messaging.twisted.service" title="Permalink to this headline">¶</a></h3>
<p>Twisted Service to start and stop the Fedora Messaging Twisted Factory.</p>
<p>This Service makes it easier to build a Twisted application that embeds a
Fedora Messaging component. See the <code class="docutils literal notranslate"><span class="pre">verify_missing</span></code> service in
fedmsg-migration-tools for a use case.</p>
<p>See <a class="reference external" href="https://twistedmatrix.com/documents/current/core/howto/application.html">https://twistedmatrix.com/documents/current/core/howto/application.html</a></p>
<dl class="class">
<dt id="fedora_messaging.twisted.service.FedoraMessagingService">
<em class="property">class </em><code class="descclassname">fedora_messaging.twisted.service.</code><code class="descname">FedoraMessagingService</code><span class="sig-paren">(</span><em>amqp_url=None</em>, <em>exchanges=None</em>, <em>queues=None</em>, <em>bindings=None</em>, <em>consumers=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fedora_messaging/twisted/service.html#FedoraMessagingService"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fedora_messaging.twisted.service.FedoraMessagingService" title="Permalink to this definition">¶</a></dt>
<dd><p>A Twisted service to connect to the Fedora Messaging broker.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>on_message</strong> (<em>callable|None</em>) – Callback that will be passed each
incoming messages. If None, no message consuming is setup.</li>
<li><strong>amqp_url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – URL to use for the AMQP server.</li>
<li><strong>exchanges</strong> (<em>list of dicts</em>) – List of exchanges to declare at the start of
every connection. Each dictionary is passed to
<a class="reference external" href="https://pika.readthedocs.io/en/latest/modules/channel.html#pika.channel.Channel.exchange_declare" title="(in pika v1)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pika.channel.Channel.exchange_declare()</span></code></a> as keyword arguments,
so any parameter to that method is a valid key.</li>
<li><strong>queues</strong> (<em>list of dicts</em>) – List of queues to declare at the start of every
connection. Each dictionary is passed to
<a class="reference external" href="https://pika.readthedocs.io/en/latest/modules/channel.html#pika.channel.Channel.queue_declare" title="(in pika v1)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pika.channel.Channel.queue_declare()</span></code></a> as keyword arguments,
so any parameter to that method is a valid key.</li>
<li><strong>bindings</strong> (<em>list of dicts</em>) – A list of bindings to be created between
queues and exchanges. Each dictionary is passed to
<a class="reference external" href="https://pika.readthedocs.io/en/latest/modules/channel.html#pika.channel.Channel.queue_bind" title="(in pika v1)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pika.channel.Channel.queue_bind()</span></code></a>. The “queue” and “exchange” keys
are required.</li>
<li><strong>consumers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A dictionary where each key is a queue name and the value
is a callable object to handle messages on that queue. Consumers will be
set up after each connection is established so they will survive networking
issues.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="fedora_messaging.twisted.service.FedoraMessagingService.factoryClass">
<code class="descname">factoryClass</code><a class="headerlink" href="#fedora_messaging.twisted.service.FedoraMessagingService.factoryClass" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#fedora_messaging.twisted.factory.FedoraMessagingFactory" title="fedora_messaging.twisted.factory.FedoraMessagingFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">fedora_messaging.twisted.factory.FedoraMessagingFactory</span></code></a></p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Fedora Messaging</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=fedora-infra&repo=fedora-messaging&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="publishing.html">Publishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="consuming.html">Consumers</a></li>
<li class="toctree-l1"><a class="reference internal" href="messages.html">Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="fedora-messaging.html">fedora-messaging</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial/index.html">Using Fedora Messaging</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#publishing">Publishing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subscribing">Subscribing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-fedora_messaging.signals">Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-fedora_messaging.message">Message Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-fedora_messaging.exceptions">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#twisted">Twisted</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wire-format.html">Message Format</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tutorial/conversion.html" title="previous chapter">Converting a fedmsg application</a></li>
      <li>Next: <a href="wire-format.html" title="next chapter">Message Format</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Red Hat, Inc.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>