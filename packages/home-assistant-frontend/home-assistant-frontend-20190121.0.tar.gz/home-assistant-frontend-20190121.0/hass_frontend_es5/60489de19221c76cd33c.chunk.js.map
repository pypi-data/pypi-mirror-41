{"version":3,"file":"60489de19221c76cd33c.chunk.js","sources":["webpack:///60489de19221c76cd33c.chunk.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{167:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var index_es=__webpack_require__(199);__webpack_require__.d(__webpack_exports__,\"a\",function(){return struct});var struct=Object(index_es.a)({types:{\"entity-id\":function(value){if(\"string\"!==typeof value){return\"entity id should be a string\"}if(!value.includes(\".\")){return\"entity id should be in the format 'domain.entity'\"}return!0},icon:function(value){if(\"string\"!==typeof value){return\"icon should be a string\"}if(!value.includes(\":\")){return\"icon should be in the format 'mdi:icon'\"}return!0}}})},732:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var lit_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31),lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(193),js_yaml__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(366),js_yaml__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(js_yaml__WEBPACK_IMPORTED_MODULE_2__),_polymer_app_layout_app_header_layout_app_header_layout__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(178),_polymer_app_layout_app_header_app_header__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(171),_polymer_app_layout_app_toolbar_app_toolbar__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(108),_polymer_paper_button_paper_button__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(73),_polymer_paper_icon_button_paper_icon_button__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(98),_polymer_paper_spinner_paper_spinner__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(111),_common_structs_struct__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(167),_mixins_lit_localize_mixin__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(154),_components_ha_icon__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(159),_resources_ha_style__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(99);function _typeof(obj){if(\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&\"function\"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n        app-header-layout {\\n          height: 100vh;\\n        }\\n        paper-button {\\n          font-size: 16px;\\n        }\\n        app-toolbar {\\n          background-color: var(--dark-background-color, #455a64);\\n          color: var(--dark-text-color);\\n        }\\n\\n        .comments {\\n          font-size: 16px;\\n        }\\n\\n        .content {\\n          height: calc(100vh - 68px);\\n        }\\n\\n        textarea {\\n          box-sizing: border-box;\\n          height: 100%;\\n          width: 100%;\\n          resize: none;\\n          border: 0;\\n          outline: 0;\\n          font-size: 12pt;\\n          font-family: \\\"Courier New\\\", Courier, monospace;\\n          padding: 8px;\\n        }\\n\\n        .save-button {\\n          opacity: 0;\\n          margin-left: -16px;\\n          margin-top: -4px;\\n          transition: opacity 1.5s;\\n        }\\n\\n        .saved {\\n          opacity: 1;\\n        }\\n      \"]);_templateObject3=function(){return data};return data}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err)}_next(void 0)})}}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n                    <span class=\\\"comments\\\">Comments will be not be saved!</span>\\n                  \"]);_templateObject2=function(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n      <app-header-layout>\\n        <app-header>\\n          <app-toolbar>\\n            <paper-icon-button\\n              icon=\\\"hass:close\\\"\\n              @click=\\\"\",\"\\\"\\n            ></paper-icon-button>\\n            <div main-title>Edit Config</div>\\n            \",\"\\n            <paper-button @click=\\\"\",\"\\\">Save</paper-button>\\n            <ha-icon\\n              class=\\\"save-button\\n            \",\"\\\"\\n              icon=\\\"\",\"\\\"\\n            ></ha-icon>\\n          </app-toolbar>\\n        </app-header>\\n        <div class=\\\"content\\\">\\n          <textarea\\n            autocomplete=\\\"off\\\"\\n            autocorrect=\\\"off\\\"\\n            autocapitalize=\\\"off\\\"\\n            spellcheck=\\\"false\\\"\\n            @input=\\\"\",\"\\\"\\n          ></textarea>\\n        </div>\\n      </app-header-layout>\\n    \"]);_templateObject=function(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(\"object\"===_typeof(call)||\"function\"===typeof call)){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function\")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TAB_INSERT=\"  \",lovelaceStruct=_common_structs_struct__WEBPACK_IMPORTED_MODULE_9__.a.interface({title:\"string?\",views:[\"object\"],resources:_common_structs_struct__WEBPACK_IMPORTED_MODULE_9__.a.optional([\"object\"])}),LovelaceFullConfigEditor=function(_hassLocalizeLitMixin){_inherits(LovelaceFullConfigEditor,_hassLocalizeLitMixin);function LovelaceFullConfigEditor(){_classCallCheck(this,LovelaceFullConfigEditor);return _possibleConstructorReturn(this,_getPrototypeOf(LovelaceFullConfigEditor).apply(this,arguments))}_createClass(LovelaceFullConfigEditor,[{key:\"render\",value:function(){return Object(lit_element__WEBPACK_IMPORTED_MODULE_0__.c)(_templateObject(),this._closeEditor,this._hash?Object(lit_element__WEBPACK_IMPORTED_MODULE_0__.c)(_templateObject2()):\"\",this._handleSave,Object(lit_html_directives_class_map__WEBPACK_IMPORTED_MODULE_1__.a)({saved:!1===this._saving||!0===this._changed}),this._changed?\"hass:circle-medium\":\"hass:check\",this._yamlChanged)}},{key:\"firstUpdated\",value:function(){var _this=this,textArea=this.textArea;textArea.value=js_yaml__WEBPACK_IMPORTED_MODULE_2___default.a.safeDump(this.lovelace.config);textArea.addEventListener(\"keydown\",function(e){if(51===e.keyCode){_this._hashAdded=!0;return}if(9!==e.keyCode){return}e.preventDefault();var val=textArea.value,start=textArea.selectionStart,end=textArea.selectionEnd;textArea.value=val.substring(0,start)+TAB_INSERT+val.substring(end);textArea.selectionStart=textArea.selectionEnd=start+TAB_INSERT.length})}},{key:\"_closeEditor\",value:function(){if(this._changed){if(!confirm(\"You have unsafed changes, are you sure you want to exit?\")){return}}window.onbeforeunload=null;this.closeEditor()}},{key:\"_handleSave\",value:function(){var _handleSave2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var value;return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:this._saving=!0;if(!this._hashAdded){_context.next=4;break}if(confirm(\"Your config might contain comments, these will not be saved. Do you want to continue?\")){_context.next=4;break}return _context.abrupt(\"return\");case 4:_context.prev=4;value=js_yaml__WEBPACK_IMPORTED_MODULE_2___default.a.safeLoad(this.textArea.value);_context.next=13;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](4);alert(\"Unable to parse YAML: \".concat(_context.t0));this._saving=!1;return _context.abrupt(\"return\");case 13:_context.prev=13;value=lovelaceStruct(value);_context.next=21;break;case 17:_context.prev=17;_context.t1=_context[\"catch\"](13);alert(\"Your config is not valid: \".concat(_context.t1));return _context.abrupt(\"return\");case 21:_context.prev=21;_context.next=24;return this.lovelace.saveConfig(value);case 24:_context.next=29;break;case 26:_context.prev=26;_context.t2=_context[\"catch\"](21);alert(\"Unable to save YAML: \".concat(_context.t2));case 29:window.onbeforeunload=null;this._saving=!1;this._changed=!1;this._hashAdded=!1;case 33:case\"end\":return _context.stop();}}},_callee,this,[[4,8],[13,17],[21,26]])}));return function(){return _handleSave2.apply(this,arguments)}}()},{key:\"_yamlChanged\",value:function(){this._hash=this._hashAdded||this.textArea.value.includes(\"#\");if(this._changed){return}window.onbeforeunload=function(){return!0};this._changed=!0}},{key:\"textArea\",get:function(){return this.shadowRoot.querySelector(\"textarea\")}}],[{key:\"properties\",get:function(){return{lovelace:{},_saving:{},_changed:{},_hashAdded:{},_hash:{}}}},{key:\"styles\",get:function(){return[_resources_ha_style__WEBPACK_IMPORTED_MODULE_12__.a,Object(lit_element__WEBPACK_IMPORTED_MODULE_0__.b)(_templateObject3())]}}]);return LovelaceFullConfigEditor}(Object(_mixins_lit_localize_mixin__WEBPACK_IMPORTED_MODULE_10__.a)(lit_element__WEBPACK_IMPORTED_MODULE_0__.a));customElements.define(\"hui-editor\",LovelaceFullConfigEditor)}}]);"],"mappings":"AAAA","sourceRoot":""}