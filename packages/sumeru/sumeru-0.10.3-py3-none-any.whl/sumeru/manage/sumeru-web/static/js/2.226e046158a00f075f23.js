webpackJsonp([2],{USV7:function(t,s){},WbFg:function(t,s){},a52u:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("INCx"),e=a.n(i),r={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}},n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],staticClass:"v-spinner"},[s("div",{staticClass:"v-pulse v-pulse1",style:[this.spinnerStyle,this.spinnerDelay1]}),s("div",{staticClass:"v-pulse v-pulse2",style:[this.spinnerStyle,this.spinnerDelay2]}),s("div",{staticClass:"v-pulse v-pulse3",style:[this.spinnerStyle,this.spinnerDelay3]})])},staticRenderFns:[]};var l=a("VU/8")(r,n,!1,function(t){a("USV7")},null,null).exports,o=a("X2Oc"),_=(a("o/zv"),{name:"dashboard",components:{PulseLoader:l},data:function(){return{circle_process_width:95,name:sessionStorage.getItem("ms_username"),dashboard_data:{},plugin_list:[],timer:null}},created:function(){this.get_dashboard_data()},computed:{role:function(){return"admin"===this.name?"超级管理员":"普通用户"}},filters:{formatTimestamp:function(t){var s=new Date(e()(1e3*t));return Object(o.a)(s,"yyyy-MM-dd HH:mm:ss")}},destroyed:function(){clearInterval(this.timer)},methods:{get_dashboard_data:function(){var t=this;this.$axios.get("/api/dashboard").then(function(s){t.dashboard_data=s.data.result,t.timer=setInterval(function(){clearInterval(t.timer),t.get_dashboard_data()},1e3)}),this.$axios.get("/api/plugin/list").then(function(s){t.plugin_list=s.data.result.slice(0,8)})},secondToDate:function(t){var s=Math.floor(t/86400)<10?"0"+Math.floor(t/86400):Math.floor(t/86400),a=Math.floor(t/3600%24)<10?"0"+Math.floor(t/3600%24):Math.floor(t/3600%24),i=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),e=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60);return s+" "+this.$t("label.days")+" "+a+" "+this.$t("label.hours")+" "+i+" "+this.$t("label.minutes")+" "+e+" "+this.$t("label.seconds")},fixn:function(t,s){return void 0==t?0:t.toFixed(s)}}}),d={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-row",[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-zonglan1 iconfont_no_margin"}),t._v("\n              "+t._s(t.$t("label.system_status"))+"\n            ")])]),t._v(" "),a("div",{staticClass:"grid_bar"},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text_key"},[t._v(t._s(t.$t("label.system"))+":")]),t._v(" "),a("span",{staticClass:"text_value"},[t._v(t._s(t.dashboard_data.OS))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text_key"},[t._v("Sumeru版本:")]),t._v(" "),a("span",{staticClass:"text_value"},[t._v(t._s(t.dashboard_data.VERSION))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text_key"},[t._v("IP:")]),t._v(" "),a("span",{staticClass:"text_value"},[t._v(t._s(t.dashboard_data.IP))])])],1),t._v(" "),a("div",{staticClass:"grid_bar"},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text_key"},[t._v(t._s(t.$t("label.running"))+":")]),t._v(" "),a("span",{staticClass:"text_value"},[t._v(t._s(t.secondToDate(t.dashboard_data.RUN_COST)))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text_key"},[t._v("服务器时间:")]),t._v(" "),a("span",{staticClass:"text_value"},[t._v(t._s(t._f("formatTimestamp")(t.dashboard_data.UNIX_TIME)))])])],1),t._v(" "),a("div",{staticClass:"grid_bar"},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text_key"},[t._v("实时任务 - 当前(峰值):")]),t._v(" "),a("span",{staticClass:"text_value"},[t._v(t._s(t.dashboard_data.TPS_CURRENT_TASK_COUNT)+" ("+t._s(t.dashboard_data.TPS_MAX_TASK_COUNT)+")")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"text_key"},[t._v("任务并发 - 当前(峰值):")]),t._v(" "),a("span",{staticClass:"text_value"},[t._v(t._s(t.dashboard_data.CURRENT_TASK_COUNT)+" ("+t._s(t.dashboard_data.MAX_TASK_COUNT)+")")])])],1),t._v(" "),a("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-1"},[a("i",{staticClass:"el-icon-data iconfont_no_margin grid-con-icon"}),t._v(" "),a("div",{staticClass:"grid-cont-right"},[a("div",[a("router-link",{staticClass:"grid-num",attrs:{to:"/task_status?status="}},[t._v(t._s(t.dashboard_data.TASK_COUNT))])],1),t._v(" "),a("div",[t._v(t._s(t.$t("label.total")))])])])])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-4"},[a("i",{staticClass:"el-icon-yunxingzhong iconfont_no_margin grid-con-icon"}),t._v(" "),a("div",{staticClass:"grid-cont-right"},[a("div",[a("router-link",{staticClass:"grid-num",attrs:{to:"/task_status?status=RUNNING"}},[t._v(t._s(t.dashboard_data.TASK_RUNNING_COUNT))])],1),t._v(" "),a("div",[t._v(t._s(t.$t("label.running_task")))])])])])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-2"},[a("i",{staticClass:"el-icon-chenggong iconfont_no_margin grid-con-icon"}),t._v(" "),a("div",{staticClass:"grid-cont-right"},[a("div",[a("router-link",{staticClass:"grid-num",attrs:{to:"/task_status?status=SUCCESS"}},[t._v(t._s(t.dashboard_data.TASK_SUCCESS_COUNT))])],1),t._v(" "),a("div",[t._v(t._s(t.$t("label.success")))])])])])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-3"},[a("i",{staticClass:"el-icon-shibai iconfont_no_margin grid-con-icon"}),t._v(" "),a("div",{staticClass:"grid-cont-right"},[a("div",[a("router-link",{staticClass:"grid-num",attrs:{to:"/task_status?status=FAILURE"}},[t._v(t._s(t.dashboard_data.TASK_FAIL_COUNT))])],1),t._v(" "),a("div",[t._v(t._s(t.$t("label.failure")))])])])])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-1"},[a("i",{staticClass:"el-icon-jihuarenwu iconfont_no_margin grid-con-icon"}),t._v(" "),a("div",{staticClass:"grid-cont-right"},[a("div",[a("router-link",{staticClass:"grid-num",attrs:{to:"/task"}},[t._v(t._s(t.dashboard_data.CRONTASK_COUNT))])],1),t._v(" "),a("div",[t._v(t._s(t.$t("label.scheduling")))])])])])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-1"},[a("i",{staticClass:"el-icon-nodejiedian iconfont_no_margin grid-con-icon"}),t._v(" "),a("div",{staticClass:"grid-cont-right"},[a("div",[a("router-link",{staticClass:"grid-num",attrs:{to:"/node"}},[t._v(t._s(t.dashboard_data.DNODE_COUNT))])],1),t._v(" "),a("div",[t._v(t._s(t.$t("title.node")))])])])])],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"progress_bar",attrs:{span:9}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-fuwuqizhuangtai iconfont_no_margin"}),t._v("\n                "+t._s(t.$t("label.server_status"))+"\n              ")])]),t._v(" "),a("div",{staticClass:"progress_div"},[a("div",{staticClass:"process_label"},[t._v("CPU")]),t._v(" "),a("el-progress",{attrs:{type:"circle",percentage:t.dashboard_data.CPU_USAGE,color:"#42b983",width:t.circle_process_width}}),t._v(" "),a("div",{staticClass:"process_label"},[t._v(t._s(t.dashboard_data.LOGICAL_CPU_CORE_NUM)+" "+t._s(t.$t("label.cores"))+","+t._s(t.$t("label.load"))+" "+t._s(t.dashboard_data.LOAD_AVG))])],1),t._v(" "),a("div",{staticClass:"progress_div"},[a("div",{staticClass:"process_label"},[t._v(t._s(t.$t("label.memory")))]),t._v(" "),a("el-progress",{attrs:{type:"circle",percentage:t.dashboard_data.RAM_USAGE,color:"#f1e05a",width:t.circle_process_width}}),t._v(" "),a("div",{staticClass:"process_label"},[t._v(t._s(t.fixn(t.dashboard_data.USED_MEM,2))+" GB/"+t._s(t.fixn(t.dashboard_data.TOTAL_MEM,2))+" GB")])],1),t._v(" "),a("div",{staticClass:"progress_div"},[a("div",{staticClass:"process_label"},[t._v(t._s(t.$t("label.disk")))]),t._v(" "),a("el-progress",{attrs:{type:"circle",percentage:t.dashboard_data.DISK_USAGE,width:t.circle_process_width}}),t._v(" "),a("div",{staticClass:"process_label"},[t._v(t._s(t.fixn(t.dashboard_data.USED_DISK,2))+" GB/"+t._s(t.fixn(t.dashboard_data.TOTAL_DISK,2))+" GB")])],1)])],1),t._v(" "),a("el-col",{staticClass:"progress_bar",attrs:{span:5}},[a("el-card",{staticStyle:{height:"249px"},attrs:{shadow:"hover",id:"network_traffic"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"el-icon-wangluoliuliangx iconfont_no_margin"}),t._v("\n                "+t._s(t.$t("label.network_traffic"))+"\n              ")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"text_key"},[t._v(t._s(t.$t("label.sending"))+":")]),t._v(" "),a("div",{staticClass:"text_value"},[t._v(t._s(t.fixn(t.dashboard_data.UPLINK_SPEED,3))+" kB/s")]),t._v(" "),a("div",{staticClass:"text_key"},[t._v(t._s(t.$t("label.receiving"))+":")]),t._v(" "),a("div",{staticClass:"text_value"},[t._v(t._s(t.fixn(t.dashboard_data.DOWNLINK_SPEED,3))+" kB/s")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"text_key"},[t._v(t._s(t.$t("label.total_sent"))+":")]),t._v(" "),a("div",{staticClass:"text_value"},[t._v(t._s(t.fixn(t.dashboard_data.NETWORK_SEND,3))+" GB")]),t._v(" "),a("div",{staticClass:"text_key"},[t._v(t._s(t.$t("label.total_received"))+":")]),t._v(" "),a("div",{staticClass:"text_value"},[t._v(t._s(t.fixn(t.dashboard_data.NETWORK_RECV,3))+" GB")])])],1)],1),t._v(" "),a("el-col",{staticClass:"plugin_center",attrs:{span:10}},[a("el-card",{staticClass:"mgb20",staticStyle:{height:"250px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("router-link",{attrs:{to:"/plugin_center"}},[a("i",{staticClass:"el-icon-iconfontmokuai iconfont_no_margin"}),t._v("\n                  "+t._s(t.$t("title.plugin_center"))+"\n                ")])],1)]),t._v(" "),a("el-row",t._l(t.plugin_list,function(s){return a("el-col",{key:s.id,attrs:{span:6}},[a("div",{staticClass:"plugin_item"},[a("img",{staticClass:"img_size",attrs:{src:s.logo}}),t._v(" "),a("div",{staticClass:"plugin_title"},[t._v(t._s(s.plugin_name))])])])}))],1)],1)],1)],1)],1),t._v(" "),a("el-row")],1)},staticRenderFns:[]};var c=a("VU/8")(_,d,!1,function(t){a("WbFg")},"data-v-e01c887e",null);s.default=c.exports},"o/zv":function(t,s,a){(function(t){function a(t,s){for(var a=0,i=t.length-1;i>=0;i--){var e=t[i];"."===e?t.splice(i,1):".."===e?(t.splice(i,1),a++):a&&(t.splice(i,1),a--)}if(s)for(;a--;a)t.unshift("..");return t}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,e=function(t){return i.exec(t).slice(1)};function r(t,s){if(t.filter)return t.filter(s);for(var a=[],i=0;i<t.length;i++)s(t[i],i,t)&&a.push(t[i]);return a}s.resolve=function(){for(var s="",i=!1,e=arguments.length-1;e>=-1&&!i;e--){var n=e>=0?arguments[e]:t.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(s=n+"/"+s,i="/"===n.charAt(0))}return s=a(r(s.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+s||"."},s.normalize=function(t){var i=s.isAbsolute(t),e="/"===n(t,-1);return(t=a(r(t.split("/"),function(t){return!!t}),!i).join("/"))||i||(t="."),t&&e&&(t+="/"),(i?"/":"")+t},s.isAbsolute=function(t){return"/"===t.charAt(0)},s.join=function(){var t=Array.prototype.slice.call(arguments,0);return s.normalize(r(t,function(t,s){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},s.relative=function(t,a){function i(t){for(var s=0;s<t.length&&""===t[s];s++);for(var a=t.length-1;a>=0&&""===t[a];a--);return s>a?[]:t.slice(s,a-s+1)}t=s.resolve(t).substr(1),a=s.resolve(a).substr(1);for(var e=i(t.split("/")),r=i(a.split("/")),n=Math.min(e.length,r.length),l=n,o=0;o<n;o++)if(e[o]!==r[o]){l=o;break}var _=[];for(o=l;o<e.length;o++)_.push("..");return(_=_.concat(r.slice(l))).join("/")},s.sep="/",s.delimiter=":",s.dirname=function(t){var s=e(t),a=s[0],i=s[1];return a||i?(i&&(i=i.substr(0,i.length-1)),a+i):"."},s.basename=function(t,s){var a=e(t)[2];return s&&a.substr(-1*s.length)===s&&(a=a.substr(0,a.length-s.length)),a},s.extname=function(t){return e(t)[3]};var n="b"==="ab".substr(-1)?function(t,s,a){return t.substr(s,a)}:function(t,s,a){return s<0&&(s=t.length+s),t.substr(s,a)}}).call(s,a("W2nU"))}});