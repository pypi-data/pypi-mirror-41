{"version":3,"sources":["webpack://algorithmx-jupyter/webpack/bootstrap","webpack://algorithmx-jupyter/./js/version.ts","webpack://algorithmx-jupyter/./js/index.ts","webpack://algorithmx-jupyter/./js/widget.ts","webpack://algorithmx-jupyter/external \"@jupyter-widgets/base\"","webpack://algorithmx-jupyter/./js/buttons.ts","webpack://algorithmx-jupyter/external \"algorithmx\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","data","MODULE_VERSION","version","MODULE_NAME","__export","base_1","version_1","buttonUtils","__importStar","algorithmx","CanvasModel","DOMWidgetModel","[object Object]","assign","super","defaults","_model_name","model_name","_model_module","model_module","_model_module_version","model_module_version","_view_name","view_name","_view_module","view_module","_view_module_version","view_module_version","_dispatch_events","serializers","CanvasView","DOMWidgetView","this","client","canvas","eventIndex","stopped","events","forEach","eventStr","event","JSON","parse","dispatch","model","playEvents","newEvents","slice","length","immediateCanvas","eventQ","duration","cancelall","startall","remove","add","size","zoomkey","setTimeout","svgattr","resetCanvas","element","el","canvasDiv","querySelector","removeChild","buttonDiv","removeCanvas","playAllEvents","stopall","document","createElement","buttonPlay","createButton","setIcon","clickStart","clickStop","buttonRestart","clickRestart","appendChild","setAttribute","subscribe","fullEvent","source","fullEventStr","stringify","send","renderButtons","on","eventsChanged","__WEBPACK_EXTERNAL_MODULE__4__","iconName","onclick","button","style","width","height","backgroundColor","display","textAlign","marginRight","cssFloat","onmouseover","cursor","onmousedown","onmouseup","onmouseleave","icon","fontSize","color","lineHeight","__WEBPACK_EXTERNAL_MODULE__6__"],"mappings":"oGACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mFClFA,MAAMC,EAAOpC,EAAQ,GAKRE,EAAAmC,eAAiBD,EAAKE,QAKtBpC,EAAAqC,YAAcH,EAAKzB,kJCVhC6B,EAAAxC,EAAA,IACAwC,EAAAxC,EAAA,+mECDA,MAAAyC,EAAAzC,EAAA,GACA0C,EAAA1C,EAAA,GACA2C,EAAAC,EAAA5C,EAAA,IAEA6C,EAAAD,EAAA5C,EAAA,IAEA,MAAa8C,UAAoBL,EAAAM,eAC/BC,WACE,OAAAlC,OAAAmC,OAAA,GAAWC,MAAMC,WAAU,CACzBC,YAAaN,EAAYO,WACzBC,cAAeR,EAAYS,aAC3BC,sBAAuBV,EAAYW,qBACnCC,WAAYZ,EAAYa,UACxBC,aAAcd,EAAYe,YAC1BC,qBAAsBhB,EAAYiB,oBAElCC,iBAAkB,MAIflB,EAAAmB,YAAWnD,OAAAmC,OAAA,GACbR,EAAAM,eAAekB,aAGbnB,EAAAO,WAAa,cACbP,EAAAS,aAAeb,EAAAH,YACfO,EAAAW,qBAAuBf,EAAAL,eACvBS,EAAAa,UAAY,cACZb,EAAAe,YAAcnB,EAAAH,YACdO,EAAAiB,oBAAsBrB,EAAAL,eAvB/BnC,EAAA4C,cA0BA5C,EAAAgE,WAAA,cAAgCzB,EAAA0B,cAAhCnB,kCACUoB,KAAAC,OAAmC,KACnCD,KAAAE,OAA4C,KAC5CF,KAAAG,WAAa,EAEbH,KAAAI,SAAU,EAElBxB,WAAWyB,GACW,OAAhBL,KAAKC,QACTI,EAAOC,QAAQC,IACb,MAAMC,EAAQC,KAAKC,MAAMH,GACzBP,KAAKC,OAAQU,SAASH,KAI1B5B,gBACE,MAAMyB,EAASL,KAAKY,MAAM/D,IAAI,oBAC9BmD,KAAKa,WAAWR,GAGlBzB,gBACE,GAAoB,OAAhBoB,KAAKC,OAAiB,OAE1B,MAAMI,EAAgCL,KAAKY,MAAM/D,IAAI,oBAC/CiE,EAAYT,EAAOU,MAAMf,KAAKG,YACpCH,KAAKG,WAAaE,EAAOW,OAEzBhB,KAAKa,WAAWC,GAGlBlC,cACE,GAAoB,OAAhBoB,KAAKE,OAAiB,OAC1B,MAAMe,EAAkBjB,KAAKE,OAAOgB,OAAO,MAAMC,SAAS,GAC1DF,EAAgBG,YAAYC,WAC5BJ,EAAgBK,SAChBL,EAAgBM,MAAMC,KAAK,CAAC,IAAK,MAAMC,SAAQ,GAC/CC,WAAW,KAAQT,EAAgBU,QAAQ,QAAS,SAAW,GAGjE/C,eACEoB,KAAK4B,cAEL,MAAMC,EAAmB7B,KAAK8B,GACxBC,EAAYF,EAAQG,cAAc,wBACtB,OAAdD,GAAoBF,EAAQI,YAAYF,GAE5C,MAAMG,EAAYL,EAAQG,cAAc,sBACtB,OAAdE,GAAoBL,EAAQI,YAAYC,GAG9CtD,SACEoB,KAAKmC,eACLrD,MAAMwC,SAGR1C,eACsB,OAAhBoB,KAAKE,SAETF,KAAK4B,cACL5B,KAAKoC,gBACLpC,KAAKI,SAAU,GAGjBxB,aACsB,OAAhBoB,KAAKE,SACTF,KAAKE,OAAOgB,OAAO,MAAMG,WACzBrB,KAAKI,SAAU,GAGjBxB,YACsB,OAAhBoB,KAAKE,SACTF,KAAKE,OAAOgB,OAAO,MAAMmB,UACzBrC,KAAKI,SAAU,GAGjBxB,gBACE,MAAMiD,EAAmB7B,KAAK8B,GAExBI,EAAYI,SAASC,cAAc,OAEnCC,EAAajE,EAAYkE,aAAa,QAAS,KAC/CzC,KAAKI,SACP7B,EAAYmE,QAAQF,EAAY,SAChCxC,KAAK2C,eAELpE,EAAYmE,QAAQF,EAAY,QAChCxC,KAAK4C,eAIHC,EAAgBtE,EAAYkE,aAAa,SAAU,KACvDlE,EAAYmE,QAAQF,EAAY,SAChCxC,KAAK8C,iBAGPZ,EAAUa,YAAYP,GACtBN,EAAUa,YAAYF,GAEtBhB,EAAQkB,YAAYb,GAGtBtD,SACEoB,KAAKmC,eAEL,MAAMJ,EAAYO,SAASC,cAAc,OACzCR,EAAUiB,aAAa,KAAM,wBAE7BhD,KAAKC,OAASxB,EAAWwB,OAAO8B,GAEhC/B,KAAKC,OAAOgD,UAAUzC,IACpB,MAAM0C,EAAY,CAAEC,OAAQ,aAAcnF,KAAMwC,GAC1C4C,EAAe3C,KAAK4C,UAAUH,GACpClD,KAAKsD,KAAKF,KAGZpD,KAAKE,OAASF,KAAKC,OAAOC,SAC1BF,KAAK4B,cAEoB5B,KAAK8B,GACtBiB,YAAYhB,GAEA/B,KAAKY,MAAM/D,IAAI,kBAClBmD,KAAKuD,gBAEtBvD,KAAKY,MAAM4C,GAAG,0BAA2BxD,KAAKyD,cAAezD,MAC7DA,KAAKyD,iCC7JT1H,EAAAD,QAAA4H,iFCMa5H,EAAA2G,aAAe,EAACkB,EAAkBC,KAC7C,MAAMC,EAASvB,SAASC,cAAc,OACtCzG,EAAA2G,aACAoB,EAAOD,QAAUA,EAEjBC,EAAOC,MAAMC,MAAQ,OACrBF,EAAOC,MAAME,OAAS,OACtBH,EAAOC,MAAMG,gBAbM,qBAcnBJ,EAAOC,MAAMI,QAAU,eACvBL,EAAOC,MAAMK,UAAY,SACzBN,EAAOC,MAAMM,YAAc,MAC3BP,EAAOC,MAAMO,SAAW,OAExBR,EAAOS,YAAc,MACnBT,EAAOC,MAAMG,gBAnBG,qBAoBhBJ,EAAOC,MAAMS,OAAS,YAExBV,EAAOW,YAAc,MAAQX,EAAOC,MAAMG,gBArBxB,uBAsBlBJ,EAAOY,UAAY,MAAQZ,EAAOC,MAAMG,gBAvBtB,uBAwBlBJ,EAAOa,aAAe,MACpBb,EAAOC,MAAMG,gBA1BI,qBA2BjBJ,EAAOC,MAAMS,OAAS,OAGxB,MAAMI,EAAOrC,SAASC,cAAc,KAQpC,OAPAoC,EAAK3B,aAAa,cAAeW,QACjCgB,EAAKb,MAAMc,SAAW,OACtBD,EAAKb,MAAMe,MAAQ,kBACnBF,EAAKb,MAAMgB,WAAa,OAExBjB,EAAOd,YAAY4B,GAEZd,IAGI/H,EAAA4G,QAAU,EAACmB,EAAiBF,KACvC,MAAMgB,EAAOd,EAAO7B,cAAc,KACrB,OAAT2C,GAAeA,EAAK3B,aAAa,cAAeW,yBC3CtD5H,EAAAD,QAAAiJ","file":"embed-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","const data = require('../package.json')\n\n/**\n * The current package version.\n */\nexport const MODULE_VERSION = data.version\n\n/*\n * The current package name.\n */\nexport const MODULE_NAME = data.name\n","export * from './version'\nexport * from './widget'\n","import { DOMWidgetModel, DOMWidgetView, ISerializers } from '@jupyter-widgets/base'\nimport { MODULE_NAME, MODULE_VERSION } from './version'\nimport * as buttonUtils from './buttons'\n\nimport * as algorithmx from 'algorithmx'\n\nexport class CanvasModel extends DOMWidgetModel {\n  defaults() {\n    return {...super.defaults(),\n      _model_name: CanvasModel.model_name,\n      _model_module: CanvasModel.model_module,\n      _model_module_version: CanvasModel.model_module_version,\n      _view_name: CanvasModel.view_name,\n      _view_module: CanvasModel.view_module,\n      _view_module_version: CanvasModel.view_module_version,\n\n      _dispatch_events: []\n    };\n  }\n\n  static serializers: ISerializers = {\n    ...DOMWidgetModel.serializers,\n  }\n\n  static model_name = 'CanvasModel'\n  static model_module = MODULE_NAME\n  static model_module_version = MODULE_VERSION\n  static view_name = 'CanvasModel'\n  static view_module = MODULE_NAME\n  static view_module_version = MODULE_VERSION\n}\n\nexport class CanvasView extends DOMWidgetView {\n  private client: algorithmx.Client | null = null\n  private canvas: algorithmx.CanvasSelection | null = null\n  private eventIndex = 0\n\n  private stopped = false\n\n  playEvents(events: ReadonlyArray<string>) {\n    if (this.client === null) return\n    events.forEach(eventStr => {\n      const event = JSON.parse(eventStr) as algorithmx.DispatchEvent\n      this.client!.dispatch(event)\n    })\n  }\n\n  playAllEvents() {\n    const events = this.model.get('_dispatch_events')\n    this.playEvents(events)\n  }\n\n  eventsChanged() {\n    if (this.client === null) return\n\n    const events: ReadonlyArray<string> = this.model.get('_dispatch_events')\n    const newEvents = events.slice(this.eventIndex)\n    this.eventIndex = events.length\n\n    this.playEvents(newEvents)\n  }\n\n  resetCanvas() {\n    if (this.canvas === null) return\n    const immediateCanvas = this.canvas.eventQ(null).duration(0)\n    immediateCanvas.cancelall().startall()\n    immediateCanvas.remove()\n    immediateCanvas.add().size([400, 250]).zoomkey(true)\n    setTimeout(() => { immediateCanvas.svgattr('width', '100%') }, 1)\n  }\n\n  removeCanvas() {\n    this.resetCanvas()\n\n    const element: Element = this.el\n    const canvasDiv = element.querySelector('algorithmx-container')\n    if (canvasDiv !== null) element.removeChild(canvasDiv)\n\n    const buttonDiv = element.querySelector('algorithmx-buttons')\n    if (buttonDiv !== null) element.removeChild(buttonDiv)\n  }\n\n  remove() {\n    this.removeCanvas()\n    super.remove()\n  }\n\n  clickRestart() {\n    if (this.canvas === null) return\n\n    this.resetCanvas()\n    this.playAllEvents()\n    this.stopped = false\n  }\n\n  clickStart () {\n    if (this.canvas === null) return\n    this.canvas.eventQ(null).startall()\n    this.stopped = false\n  }\n\n  clickStop () {\n    if (this.canvas === null) return\n    this.canvas.eventQ(null).stopall()\n    this.stopped = true\n  }\n\n  renderButtons() {\n    const element: Element = this.el\n\n    const buttonDiv = document.createElement('div')\n\n    const buttonPlay = buttonUtils.createButton('pause', () => {\n      if (this.stopped) {\n        buttonUtils.setIcon(buttonPlay, 'pause')\n        this.clickStart()\n      } else {\n        buttonUtils.setIcon(buttonPlay, 'play')\n        this.clickStop()\n      }\n    })\n\n    const buttonRestart = buttonUtils.createButton('repeat', () => {\n      buttonUtils.setIcon(buttonPlay, 'pause')\n      this.clickRestart()\n    })\n\n    buttonDiv.appendChild(buttonPlay)\n    buttonDiv.appendChild(buttonRestart)\n\n    element.appendChild(buttonDiv)\n  }\n\n  render() {\n    this.removeCanvas()\n\n    const canvasDiv = document.createElement('div')\n    canvasDiv.setAttribute('id', 'algorithmx-container')\n\n    this.client = algorithmx.client(canvasDiv)\n\n    this.client.subscribe(event => {\n      const fullEvent = { source: 'algorithmx', data: event }\n      const fullEventStr = JSON.stringify(fullEvent)\n      this.send(fullEventStr)\n    })\n\n    this.canvas = this.client.canvas()\n    this.resetCanvas()\n\n    const element: Element = this.el\n    element.appendChild(canvasDiv)\n\n    const showButtons = this.model.get('_show_buttons')\n    if (showButtons) this.renderButtons()\n\n    this.model.on('change:_dispatch_events', this.eventsChanged, this)\n    this.eventsChanged()\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","const BUTTON_COLOR = 'rgb(238, 238, 238)'\nconst HOVER_COLOR = 'rgb(220, 220, 220)'\nconst CLICK_COLOR = 'rgb(200, 200, 200)'\n\nconst SIZE = 28\n\nexport const createButton = (iconName: string, onclick: () => void): HTMLDivElement => {\n  const button = document.createElement('div')\n  createButton\n  button.onclick = onclick\n\n  button.style.width = `${SIZE}px`\n  button.style.height = `${SIZE}px`\n  button.style.backgroundColor = BUTTON_COLOR\n  button.style.display = 'inline-block'\n  button.style.textAlign = 'center'\n  button.style.marginRight = '6px'\n  button.style.cssFloat = 'left'\n\n  button.onmouseover = () => {\n    button.style.backgroundColor = HOVER_COLOR\n    button.style.cursor = 'pointer'\n  }\n  button.onmousedown = () => { button.style.backgroundColor = CLICK_COLOR }\n  button.onmouseup = () => { button.style.backgroundColor = HOVER_COLOR }\n  button.onmouseleave = () => {\n    button.style.backgroundColor = BUTTON_COLOR\n    button.style.cursor = null\n  }\n\n  const icon = document.createElement('i')\n  icon.setAttribute('class', `fa-${iconName} fa`)\n  icon.style.fontSize = '12px'\n  icon.style.color = 'rgb(50, 50, 50)'\n  icon.style.lineHeight = `${SIZE}px`\n\n  button.appendChild(icon)\n\n  return button\n}\n\nexport const setIcon = (button: Element, iconName: string): void => {\n  const icon = button.querySelector('i')\n  if (icon !== null) icon.setAttribute('class', `fa-${iconName} fa`)\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;"],"sourceRoot":""}